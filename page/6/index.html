<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TanJunDang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Build a better app.">
<meta property="og:type" content="website">
<meta property="og:title" content="TanJunDang">
<meta property="og:url" content="TanJunDang.github.io/page/6/index.html">
<meta property="og:site_name" content="TanJunDang">
<meta property="og:description" content="Build a better app.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TanJunDang">
<meta name="twitter:description" content="Build a better app.">
  
    <link rel="alternative" href="/atom.xml" title="TanJunDang" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: false,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','LFp3mbq3aoaxwzxP9eby','2.0.0');
</script>

        <a href="/" class="profilepic">
            
            <img src="/img/lrving.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">TanJunDang</a></h1>
        </hgroup>

        
        
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">HOME</a></li>
                        
                            <li><a href="/archives">ARCHIVES</a></li>
                        
                            <li><a href="/about">ABOUT</a></li>
                        
                            <li><a href="/tags">TAGs</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="mailto:TanJunDang324@gmail.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/TanJunDang" title="github">github</a>
                            
                                <a class="fl twitter" target="_blank" href="http: //twitter.com/TanJunDang" title="twitter">twitter</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://stormzhang.com/">stormzhang</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://kevinsu917.github.io/posts/">kevinsu917</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">TanJunDang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img src="/img/lrving.jpg" class="js-avatar" style="width: 100%; height: 100%; opacity: 1;">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">TanJunDang</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">HOME</a></li>
                
                    <li><a href="/archives">ARCHIVES</a></li>
                
                    <li><a href="/about">ABOUT</a></li>
                
                    <li><a href="/tags">TAGs</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="mailto:TanJunDang324@gmail.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/TanJunDang" title="github">github</a>
                    
                        <a class="twitter" target="_blank" href="http: //twitter.com/TanJunDang" title="twitter">twitter</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Style" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/01/Style/" class="article-date">
      <time datetime="2016-01-01T12:20:39.000Z" itemprop="datePublished">2016-01-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/01/Style/">Android - Theme(Style)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Style基础知识"><a href="#Style基础知识" class="headerlink" title="Style基础知识"></a>Style基础知识</h1><h2 id="示例-如何实现一个对话框Activity"><a href="#示例-如何实现一个对话框Activity" class="headerlink" title="示例 - 如何实现一个对话框Activity"></a>示例 - 如何实现一个对话框Activity</h2><blockquote>
<p>步骤</p>
<ol>
<li>写好布局文件，绑定Activity</li>
<li>创建style 设置属性parent属性为android:Theme.Dialog（使其默认显示为屏幕中部）</li>
<li>然后设置其不显示标题、透明背景即可</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setFinishOnTouchOutside(<span class="keyword">false</span>); <span class="comment">//设置对话框activity点击外部不消失</span></span><br></pre></td></tr></table></figure>
<h2 id="Style-Theme属性"><a href="#Style-Theme属性" class="headerlink" title="Style - Theme属性"></a>Style - Theme属性</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">android:theme="@android:style/Theme.Dialog" : Activity显示为对话框模式</span><br><span class="line"></span><br><span class="line">android:theme="@android:style/Theme.NoTitleBar" : 不显示应用程序标题栏</span><br><span class="line"></span><br><span class="line">android:theme="@android:style/Theme.NoTitleBar.Fullscreen" : 不显示应用程序题栏，并全屏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Light ": 背景为白色</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Light.NoTitleBar" : 白色背景并无标题栏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Light.NoTitleBar.Fullscreen" : 白色背景，无标题栏，全屏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Black" : 背景黑色</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Black.NoTitleBar" : 黑色背景并无标题栏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Black.NoTitleBar.Fullscreen" : 黑色背景，无标题栏，全屏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Wallpaper" : 用系统桌面为应用程序背景</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Wallpaper.NoTitleBar" : 用系统桌面为应用程序背景，且无标栏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Wallpaper.NoTitleBar.Fullscreen" : 用系统桌面为应用程序景，无标题栏，全屏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Translucent : 透明背景</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Translucent.NoTitleBar" : 透明背景并无标题</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Translucent.NoTitleBar.Fullscreen" : 透明背景并无标题，全屏</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Panel ": 面板风格显示</span><br><span class="line"></span><br><span class="line">android:theme="Theme.Light.Panel" : 平板风格显示</span><br></pre></td></tr></table></figure>
<h2 id="Style-item常用属性"><a href="#Style-item常用属性" class="headerlink" title="Style - item常用属性"></a>Style - item常用属性</h2><table>
<thead>
<tr>
<th>Style标签下的Item属性</th>
<th>说明</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>windowTranslucentStatus</td>
<td>是否使用在statusBar下一层View的颜色作为statusBar的颜色，不能与statusBar同时使用</td>
<td>boolean类型</td>
</tr>
<tr>
<td>statusBarColor</td>
<td>设置statusBar的颜色</td>
<td>引用类型</td>
</tr>
<tr>
<td>windowDrawsSystemBarBackgrounds</td>
<td>设置statusBarColor属性是否生效</td>
<td>boolean类型</td>
</tr>
</tbody>
</table>
<blockquote>
<p>设置windowTranslucentStatus属性的前后</p>
</blockquote>
<p><img src="http://imglf2.nosdn.127.net/img/ZFRpZXBrMUVQR0J6NExJMG1TVGg3RE9VeVIvb29XVERmL083TE40UnJZUENlR0RRU3BUYkRnPT0.png?imageView&amp;thumbnail=300x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""> <img src="http://imglf1.nosdn.127.net/img/ZFRpZXBrMUVQR0J6NExJMG1TVGg3Q3l1RWZiS3pDUzQzMjNMeWlQSGdSdkY5QU9adVQvc0dBPT0.png?imageView&amp;thumbnail=300x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h1 id="ActivityDialog的总结"><a href="#ActivityDialog的总结" class="headerlink" title="ActivityDialog的总结"></a>ActivityDialog的总结</h1><blockquote>
<p>总结<br>1.如果style设置了parent的属性、则默认布局会显示在中部，并且自动去除进入Activity的黑色界面，如果没有设置，则要在布局文件里设置显示的位置。</p>
<p>2.透明Activity的Style基本设置是 无标题、透明背景、前一个Activity变暗。</p>
</blockquote>
<h1 id="Style的写法"><a href="#Style的写法" class="headerlink" title="Style的写法"></a>Style的写法</h1><table>
<thead>
<tr>
<th>是否有@</th>
<th>写法</th>
</tr>
</thead>
<tbody>
<tr>
<td>无@</td>
<td>android:Animation</td>
</tr>
<tr>
<td>有@</td>
<td>@android:style/Animation</td>
</tr>
</tbody>
</table>
<h2 id="示例-如何将activity变成透明Activity"><a href="#示例-如何将activity变成透明Activity" class="headerlink" title="示例 - 如何将activity变成透明Activity"></a>示例 - 如何将activity变成透明Activity</h2><blockquote>
<ol>
<li>在布局里定义好自己的样式。</li>
<li>创建一个Activity绑定该布局(setContentView)。</li>
<li>在styles里创建一个style。</li>
</ol>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"TJDStyle"</span>&gt;</span><span class="xml"></span><br><span class="line">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span><span class="comment">&lt;!--无标题栏--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span> <span class="comment">&lt;!--背景透明--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsTranslucent"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span><span class="comment">&lt;!--去除启动activity黑屏--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:backgroundDimEnabled"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span><span class="comment">&lt;!--设置前个activity变暗--&gt;</span></span><br><span class="line">		（另外还可以加入动画，默认是右边飞出 通过windowEnterAnimation、windowExitAnimation、windowAnimationStyle属性设置）</span><br><span class="line">		目前测试 前两者 无法直接设置在上述style 需要引用style才可以实现</span><br><span class="line">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowAnimationStyle"</span>&gt;</span>@style/TjdAnim<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>上下滑动式动画的配置（必须在style里声明 parent是animation）</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ErinAnim"</span> <span class="attr">parent</span>=<span class="string">"@android:style/Animation"</span>&gt;</span><span class="xml">  </span><br><span class="line">  	<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowEnterAnimation"</span>&gt;</span>@anim/push_top_in<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowExitAnimation"</span>&gt;</span>@anim/push_top_out<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>弹出动画</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">      <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolato"</span>  </span><br><span class="line">      <span class="attr">android:fromXScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:toXScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:fromYScale</span>=<span class="string">"0"</span>   </span><br><span class="line">      <span class="attr">android:toYScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:pivotX</span>=<span class="string">"0"</span>  </span><br><span class="line">      <span class="attr">android:pivotY</span>=<span class="string">"10%"</span>  </span><br><span class="line">      <span class="attr">android:duration</span>=<span class="string">"200"</span><span class="string">&lt;</span>/<span class="attr">scale</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>消失动画</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">      <span class="attr">android:interpolator</span>=<span class="string">"@android:anim/accelerate_decelerate_interpolato"</span>  </span><br><span class="line">      <span class="attr">android:fromXScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:toXScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:fromYScale</span>=<span class="string">"1.0"</span>   </span><br><span class="line">      <span class="attr">android:toYScale</span>=<span class="string">"0"</span>   </span><br><span class="line">      <span class="attr">android:pivotX</span>=<span class="string">"0"</span>  </span><br><span class="line">      <span class="attr">android:pivotY</span>=<span class="string">"10%"</span>  </span><br><span class="line">      <span class="attr">android:duration</span>=<span class="string">"200"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>4.在配置文件里找到该activity 加入style属性即可。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:theme=<span class="string">"@style/TjdStyle"</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-Theme-Style/">Android - Theme(Style)</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JavaSE" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/18/JavaSE/" class="article-date">
      <time datetime="2015-11-18T07:03:37.000Z" itemprop="datePublished">2015-11-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/18/JavaSE/">JavaSE基础</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="回调函数Callback的理解"><a href="#回调函数Callback的理解" class="headerlink" title="回调函数Callback的理解"></a>回调函数Callback的理解</h1><blockquote>
<p>A做了一半任务，需要等待B完成任务并返回数据(预留接口引用,给别人调用)，然后再完成自己的接下来的任务。</p>
</blockquote>
<h2 id="回调接口-——-数据提供者编写"><a href="#回调接口-——-数据提供者编写" class="headerlink" title="回调接口 —— 数据提供者编写"></a>回调接口 —— 数据提供者编写</h2><h3 id="数据提供者"><a href="#数据提供者" class="headerlink" title="数据提供者"></a>数据提供者</h3><blockquote>
<p>1.预留接口给他人实现(定义接口) OnItemListener<br>2.创建接口引用 onItemListener listener<br>3.提供注册接口的方法(注册接口) setonlistener<br>4.在给数据的地方注册并调用接口的方法(通过接口引用调用方法) listener.giveMsg();</p>
</blockquote>
<h3 id="数据获取者"><a href="#数据获取者" class="headerlink" title="数据获取者"></a>数据获取者</h3><blockquote>
<p>1.实现回调接口 implements Callback<br>2.注册回调函数</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaSE基础/">JavaSE基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Token/">Token</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程/">多线程</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/11/18/JavaSE/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Project-Build" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/02/Project-Build/" class="article-date">
      <time datetime="2015-11-02T10:09:52.000Z" itemprop="datePublished">2015-11-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/02/Project-Build/">Android项目架构</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="将工程Push到Coding"><a href="#将工程Push到Coding" class="headerlink" title="将工程Push到Coding"></a>将工程Push到Coding</h1><blockquote>
<p>步骤<br>1.配置ssh,在Coding的个人设置里配置SSH公钥。而不是在某个项目里配置公钥。<br>2.打开AS,利用ssh从Coding把项目check下来。打开工程后,只有一个readme文件。然后再创建新的工程,名称跟Coding项目名一致。<br>3.先修改gitignore文件,再Add。提交推送即可。</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android项目架构/">Android项目架构</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/11/02/Project-Build/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android-ContentProvider" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/01/Android-ContentProvider/" class="article-date">
      <time datetime="2015-11-01T12:43:42.000Z" itemprop="datePublished">2015-11-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/Android-ContentProvider/">Android基础之ContentProvider</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="ContentProvider的理解"><a href="#ContentProvider的理解" class="headerlink" title="ContentProvider的理解"></a>ContentProvider的理解</h1><blockquote>
<p>ContentProvider的作用是什么？<br>1.共享数据给其他应用程序。<br>2.提供音频、视频、联系人等数据给自己的程序。<br>如何使用ContentProvider？<br>1.扩展ContentProvider类。<br>2.重写相关的增删改查方法<br>3.定义Action，暴露数据。<br>ContentResolver的作用是什么？<br>1.读取ContentProvider的数据。<br>2.可以通过ContentValue操作数据。对数据库表进行增删改查。</p>
</blockquote>
<h2 id="常用URI"><a href="#常用URI" class="headerlink" title="常用URI"></a>常用URI</h2><table>
<thead>
<tr>
<th>作用</th>
<th>通用标识符URI</th>
<th>权限</th>
</tr>
</thead>
<tbody>
<tr>
<td>短信</td>
<td>Uri.parse(“content://sms/“);</td>
<td>android.permission.READ_SMS</td>
</tr>
<tr>
<td>获取联系人</td>
<td>ContactsContract.CommonDataKinds.Phone.CONTENT_URI;</td>
<td>android.permission.READ_CONTACTS <br> android.permission.WRITE_CONTACTS</td>
</tr>
<tr>
<td>查询指定电话的联系人</td>
<td>Uri.parse(“content://com.android.contacts/data/phones/filter/“ + number);</td>
</tr>
</tbody>
</table>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android基础之ContentProvider/">Android基础之ContentProvider</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android-Service" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/01/Android-Service/" class="article-date">
      <time datetime="2015-11-01T07:43:42.000Z" itemprop="datePublished">2015-11-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/Android-Service/">Android基础之Service</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Service的理解"><a href="#Service的理解" class="headerlink" title="Service的理解"></a>Service的理解</h1><blockquote>
<p>Service是什么？<br>Service是一种可以在后台运行相关任务的组件。没有界面。其存在的线程是主线程，一般会通过启动子线程来执行耗时操作。<br>Service有什么用？<br>可用于在后台执行下载任务。从而不影响用户界面操作。<br>Service分启动型服务、绑定型服务两种。<br>绑定服务中的创建Binder的扩展类的目的是什么？<br>该类主要用于获取Service的实例，以及执行相关的方法。<br>额外知识<br>1.不绑定服务，直接点击取消绑定服务会报错。因此需要通过判断Binder对象是否为空来处理。<br>2.服务可以不定义Action，通过Intent指定要跳转的Service即可。<br>3.Service的有效范围是所有满足条件的Activity。<br>4.在Service里执行耗时操作会导致ANR，启动新的线程执行耗时操作可有效避免。</p>
</blockquote>
<h2 id="两种服务的区别"><a href="#两种服务的区别" class="headerlink" title="两种服务的区别"></a>两种服务的区别</h2><table>
<thead>
<tr>
<th>Service类型</th>
<th>说明</th>
<th>使用步骤</th>
</tr>
</thead>
<tbody>
<tr>
<td>启动型服务</td>
<td>1.生命周期为onCreate-&gt;onStartCommand-&gt;onDestroy <br> 2.服务一旦启动后，需要调用stopService方法或stopSelf方法才能停止。 <br> 3.可常驻系统。</td>
<td>1.通过调用startService启动服务 <br> 2.通过stopService停止服务</td>
</tr>
<tr>
<td>绑定型服务</td>
<td>1.生命周期为onCreate-&gt;onBind-&gt;onUnbind-&gt;onDestory <br> 2.需要返回Binder对象，即定义Binder的子类。<br> 3.通过Binder子类的方法来获取Service对象，用于与Activity交互。 <br> 4.在Activity中需要通过创建ServiceConnection对象来获取service实例。从而调用service里的方法。</td>
<td>1.通过bindService绑定服务 <br> 2.通过unbindService取消绑定服务</td>
</tr>
</tbody>
</table>
<h2 id="Service生命周期"><a href="#Service生命周期" class="headerlink" title="Service生命周期"></a>Service生命周期</h2><p><img src="http://imglf.nosdn.127.net/img/ZFRpZXBrMUVQR0JZMys0S3hEcFAzeEQvNXhoOVV5SHdteWlPditDWmYxcHJtd1hzRW5HemlBPT0.png?imageView&amp;thumbnail=300x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h1 id="Service的类型及其示例"><a href="#Service的类型及其示例" class="headerlink" title="Service的类型及其示例"></a>Service的类型及其示例</h1><h2 id="启动型服务-StartService"><a href="#启动型服务-StartService" class="headerlink" title="启动型服务 - StartService"></a>启动型服务 - StartService</h2><blockquote>
<p>使用<br>1.创建java类继承Service<br>2.重写onStart、onCreate等方法。<br>3.在onCreate中新开子线程，用于执行任务。</p>
</blockquote>
<h3 id="示例-启动型服务"><a href="#示例-启动型服务" class="headerlink" title="示例 - 启动型服务"></a>示例 - 启动型服务</h3><blockquote>
<p>Service作用<br>打印0-2000的数字，完毕后停止服务</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalcService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> total;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> openService; <span class="comment">//结束服务时的标识</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CalcService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Return the communication channel to the service.</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"Not yet implemented"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        LogTool.e(<span class="string">"CalcService"</span>, <span class="string">"onCreate"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(<span class="keyword">final</span> Intent intent, <span class="keyword">int</span> flags, <span class="keyword">final</span> <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        LogTool.e(<span class="string">"CalcService"</span>, <span class="string">"onStartCommand"</span>);</span><br><span class="line">        Functions.toast(<span class="string">"Service已启动，请查看LOG"</span>);</span><br><span class="line">        <span class="comment">//启动线程执行耗时操作。通常是下载之类的任务</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (!openService) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    LogTool.e(<span class="string">"CalcService"</span>, total);</span><br><span class="line">                    total++;</span><br><span class="line">                    builder.setSubText(<span class="string">"total:"</span> + total);</span><br><span class="line">                    <span class="keyword">if</span> (total == <span class="number">2000</span>) &#123;</span><br><span class="line">                        stopSelf();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        LogTool.e(<span class="string">"CalcService"</span>, <span class="string">"onDestroy"</span>);</span><br><span class="line">        Functions.toast(<span class="string">"CalcService已停止，请查看LOG"</span>);</span><br><span class="line">        openService = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Activity中的代码</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startService</span><span class="params">(View v)</span></span>&#123;</span><br><span class="line">  Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>,CalcService.class);</span><br><span class="line">  startService(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="绑定型服务-BindService"><a href="#绑定型服务-BindService" class="headerlink" title="绑定型服务 - BindService"></a>绑定型服务 - BindService</h2><blockquote>
<p>BindService(Intent，ServiceConnection，Context.BIND_AUTO_CREATE)<br>参数分别为Intent，ServiceConnection，标识号。通常为BIND_AUTO_CREATE。<br>使用<br>1.创建java类继承Service<br>2.创建Java类继承Binder类。用于返回Service实例。<br>3.重写onBind、onUnBind等方法。<br>4.在Activity中创建ServiceConnection对象，并获取Binder实例。<br>ps:为防止未绑定服务，用户点击取消绑定而导致的崩溃。需要对unbindService进行边缘性处理。</p>
</blockquote>
<h3 id="示例-普通绑定型服务"><a href="#示例-普通绑定型服务" class="headerlink" title="示例 - 普通绑定型服务"></a>示例 - 普通绑定型服务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BindService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BindService service;</span><br><span class="line">    <span class="keyword">private</span> TestBinder binder = <span class="keyword">new</span> TestBinder();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBinder</span> <span class="keyword">extends</span> <span class="title">Binder</span> </span>&#123;</span><br><span class="line">        <span class="comment">//通过Binder对象来获取服务对象，从而调用服务里的方法</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> BindService <span class="title">getService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (service == <span class="keyword">null</span>) &#123;</span><br><span class="line">                service = <span class="keyword">new</span> BindService();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> service;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> closeThread;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BindService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span> (!closeThread) &#123;</span><br><span class="line">                    LogTool.e(<span class="string">"BindService"</span>, <span class="string">"count:"</span> + count);</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TestBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        LogTool.e(<span class="string">"BindService"</span>, <span class="string">"onBind"</span>);</span><br><span class="line">        <span class="keyword">return</span> binder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="keyword">this</span>.closeThread = <span class="keyword">true</span>;</span><br><span class="line">        LogTool.e(<span class="string">"BindService"</span>, <span class="string">"onDestroy"</span>);</span><br><span class="line">        Functions.toast(<span class="string">"BindService已停止"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onUnbind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        LogTool.e(<span class="string">"BindService"</span>, <span class="string">"onUnbind"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startDownload</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Functions.toast(<span class="string">"开始执行耗时任务，点击UnbindService按钮或返回按钮可取消任务"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Activity中的代码</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">private ServiceConnection connection = new ServiceConnection() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onServiceConnected(ComponentName name, IBinder service) &#123;</span><br><span class="line">        binder = (BindService.TestBinder) service;</span><br><span class="line">        binder.getService().startDownload();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onServiceDisconnected(ComponentName name) &#123;</span><br><span class="line">        Functions.toast(&quot;断开连接&quot;);</span><br><span class="line">        LogTool.e(&quot;BindService&quot;, &quot;serviceDisconnected&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//启动服务</span><br><span class="line">public void BindService(View v) &#123;</span><br><span class="line">    Intent intent = new Intent(this, BindService.class);</span><br><span class="line">    bindService(intent, connection, Service.BIND_AUTO_CREATE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 取消绑定服务，边缘性处理</span><br><span class="line">public void UnbindService(View v) &#123;</span><br><span class="line">    if (binder != null) &#123;</span><br><span class="line">        unbindService(connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-绑定型远程服务"><a href="#示例-绑定型远程服务" class="headerlink" title="示例 - 绑定型远程服务"></a>示例 - 绑定型远程服务</h3><blockquote>
<p>理解<br>如何定义远程服务？<br>在配置文件中添加代码android:progress=”:remote”即可<br>为什么设置了Service为远程Service就不会导致ANR了？<br>远程服务是指将服务放到另一个进程中执行，所以就不会导致程序的ANR现象。<br>如何跨进程与Activity进行通信？ 见示例<br>如何实现跨程序通信？</p>
</blockquote>
<h3 id="示例-实现跨进程与Activity交互"><a href="#示例-实现跨进程与Activity交互" class="headerlink" title="示例 - 实现跨进程与Activity交互"></a>示例 - 实现跨进程与Activity交互</h3><blockquote>
<p>步骤<br>1.创建aidl文件，定义接口(TestInterface)及相关方法。点击make project，自动生成Stub相关的接口。<br>2.创建Service类，并在ManiFest文件设置远程属性。android:process=”:remote”<br>3.在Service中创建接口TestInterface.Stub 对象，重写接口方法。<br>4.在Activity中通过AIDL接口的asInterface方法来获取AIDL对象。<br>5.利用接口对象调用相关方法。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建aidl文件，定义接口。</span></span><br><span class="line"><span class="keyword">package</span> io.tanjundang.study.test.service;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">RemoteAidlInterface</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">calcMsg</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 配置服务远程属性</span><br><span class="line"><span class="tag">&lt;<span class="name">service</span></span><br><span class="line">        <span class="attr">android:name</span>=<span class="string">".test.service.RemoteService"</span></span><br><span class="line">        <span class="attr">android:process</span>=<span class="string">":remote"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Service中创建远程接口的Stub对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    RemoteAidlInterface.Stub mBinder = <span class="keyword">new</span> RemoteAidlInterface.Stub() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calcMsg</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException </span>&#123;</span><br><span class="line">            LogTool.e(<span class="string">"RemoteService"</span>, <span class="string">"66666"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mBinder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Activity中调用远程接口的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RemoteAidlInterface mBinder;</span><br><span class="line">    <span class="keyword">private</span> ServiceConnection connection = <span class="keyword">new</span> ServiceConnection() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceConnected</span><span class="params">(ComponentName componentName, IBinder iBinder)</span> </span>&#123;</span><br><span class="line">            mBinder = RemoteAidlInterface.Stub.asInterface(iBinder);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                mBinder.calcMsg();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (RemoteException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceDisconnected</span><span class="params">(ComponentName componentName)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_remote);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StartRemoteService</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, RemoteService.class);</span><br><span class="line">        bindService(intent, connection, BIND_AUTO_CREATE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UnbindRemoteService</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mBinder != <span class="keyword">null</span>) &#123;</span><br><span class="line">            unbindService(connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例-实现跨程序与Activity交互"><a href="#示例-实现跨程序与Activity交互" class="headerlink" title="示例 - 实现跨程序与Activity交互"></a>示例 - 实现跨程序与Activity交互</h3><blockquote>
<p>步骤<br>实现步骤跟上面类似。只是需要为Service定义Action，以及将AIDL接口及其包名复制到另一程序中。即可实现跨程序交互。</p>
</blockquote>
<h2 id="IntentService"><a href="#IntentService" class="headerlink" title="IntentService"></a>IntentService</h2><blockquote>
<p>理解<br>为什么有这个类？<br>该类是Service的子类，主要是简化了异步操作繁琐复杂的代码。<br>有什么特点？<br>1.不需要自己创建子线程。<br>2.不需要考虑何时关闭服务。<br>使用情景是什么？<br>多次调用startService。<br>使用<br>1.Service继承IntentService。<br>2.以类名为参数调用父类构造方法。<br>3.重写onHandleIntent核心方法以及其他方法。</p>
</blockquote>
<h2 id="前台服务"><a href="#前台服务" class="headerlink" title="前台服务"></a>前台服务</h2><blockquote>
<p>什么是前台服务？<br>普通服务在内存不足的情况下会被系统杀掉，而前台服务不会因为内存不足而被杀掉。<br>前台服务有什么特点？<br>前台服务有通知栏提示，可设定相关的标题、提示灯。例如天气、播放器等。<br>前台服务的使用<br>1.构建Notification对象。<br>2.通过startForeground方法启动通知栏。<br>3.通过stopForeground方法关闭通知栏。<br>注意<br>Notification的构建中，若不调用setSmallIcon方法设置Icon，其他相关设置(标题、提示)均无效。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(<span class="keyword">final</span> Intent intent, <span class="keyword">int</span> flags, <span class="keyword">final</span> <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">final</span> NotificationCompat.Builder builder = <span class="keyword">new</span> NotificationCompat.Builder(getApplicationContext());</span><br><span class="line">       builder.setContentIntent(PendingIntent.getActivity(<span class="keyword">this</span>, <span class="number">0</span>, <span class="keyword">new</span> Intent(getApplicationContext(), MainActivity.class), <span class="number">0</span>));</span><br><span class="line">       builder.setContentTitle(<span class="string">"前台服务"</span>);</span><br><span class="line">       <span class="comment">//不知道什么鬼，不设置Icon，其他信息都不显示</span></span><br><span class="line">       builder.setSmallIcon(R.drawable.ic_menu_camera);</span><br><span class="line">       builder.setContentText(<span class="string">"二级子标题"</span>);</span><br><span class="line">       builder.setSubText(<span class="string">"三级子标题"</span>);</span><br><span class="line">       Notification notification = builder.build();</span><br><span class="line">       <span class="comment">//开启通知栏提示</span></span><br><span class="line">       startForeground(startId, notification);</span><br><span class="line">       LogTool.e(<span class="string">"CalcService"</span>, <span class="string">"onStartCommand"</span>);</span><br><span class="line">       Functions.toast(<span class="string">"Service已启动，请查看LOG"</span>);</span><br><span class="line">       total = intent.getIntExtra(<span class="string">"msg"</span>, <span class="number">100</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.android.com/guide/components/services.html#CreatingBoundService" target="_blank" rel="external">Service官方文档</a><br><a href="http://blog.csdn.net/guolin_blog/article/details/9797169" target="_blank" rel="external">郭林大神ADIL服务</a><br><a href="https://developer.android.com/guide/components/bound-services.html" target="_blank" rel="external">绑定服务</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android基础之Service/">Android基础之Service</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android-Broadcast" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/31/Android-Broadcast/" class="article-date">
      <time datetime="2015-10-31T07:43:42.000Z" itemprop="datePublished">2015-10-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/31/Android-Broadcast/">Android基础之BroadcastReceiver</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="BroadcastReceiver的理解"><a href="#BroadcastReceiver的理解" class="headerlink" title="BroadcastReceiver的理解"></a>BroadcastReceiver的理解</h1><blockquote>
<p>作用<br>用于接收广播、组件间相互通信。<br>区分清楚需求是接收广播还是发送广播。<br>当系统收到广播消息时，程序可以做相关的处理。<br>动态广播：广播跟随Activity的生命周期.程序启动后才有效。比静态广播快。需要自定义Action<br>静态广播：常驻型广播，当广播触发时，会启动应用。不需要启动程序就有效。<br>利用Intent、Action、sendBroadcast发送广播。</p>
</blockquote>
<h1 id="示例-动态注册广播"><a href="#示例-动态注册广播" class="headerlink" title="示例 - 动态注册广播"></a>示例 - 动态注册广播</h1><blockquote>
<p>背景<br>服务器下发新消息时，通知MainActivity更改UI<br>操作<br>1.继承BroadcastReceiver<br>2.定义过滤的Action<br>3.添加回调接口<br>5.构造函数初始化接口<br>6.重写onReceive方法(调用接口的方法)<br>7.实现接口、动态注册接口(LocalBroadcastManager类)<br>8.在获取到服务器数据的地方发送广播<br>9.在ondestory里取消广播</p>
</blockquote>
<h2 id="创建广播"><a href="#创建广播" class="headerlink" title="创建广播"></a>创建广播</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line">    CallBack callBack;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String TEST_ACTION = <span class="string">"io.movies.test.broadcaststudy.TestReceiver"</span>; <span class="comment">//定义过滤广播的Action</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestReceiver</span><span class="params">(CallBack callBack)</span> </span>&#123; <span class="comment">//提供注册绑定的方法</span></span><br><span class="line">        <span class="keyword">this</span>.callBack = callBack;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (callBack != <span class="keyword">null</span>) &#123;</span><br><span class="line">            callBack.doSomething(intent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 回调接口</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CallBack</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Intent intent)</span></span>; <span class="comment">//返回intent数据</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Activity注册广播"><a href="#Activity注册广播" class="headerlink" title="Activity注册广播"></a>Activity注册广播</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> TestReceiver msgReceiver</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">	msgReceiver = <span class="keyword">new</span> TestReceiver(<span class="keyword">this</span>); <span class="comment">//实例化</span></span><br><span class="line">	IntentFilter filter = <span class="keyword">new</span> IntentFilter(TestReceiver.TEST_ACTION);<span class="comment">//设置过滤器</span></span><br><span class="line">	<span class="comment">//利用LocalBroadcastManager调用其注册广播(使用LocalBroadcastManager提高安全性)</span></span><br><span class="line">	LocalBroadcastManager.getInstance(getActivity()).registerReceiver(msgReceiver, filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">super</span>.onDestroy();</span><br><span class="line">	LocalBroadcastManager.getInstance(TestActivity.<span class="keyword">this</span>).unregisterReceiver(receiver);<span class="comment">//关闭广播</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="模拟服务器下发通知"><a href="#模拟服务器下发通知" class="headerlink" title="模拟服务器下发通知"></a>模拟服务器下发通知</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">studyBroadcase</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//Intent携带Action</span></span><br><span class="line">	Intent intent = <span class="keyword">new</span> Intent(TestReceiver.TEST_ACTION);</span><br><span class="line">	intent.putExtra(TAG, <span class="string">"TanJunDang"</span>);</span><br><span class="line">  <span class="comment">//由于上下文使用了LocalBroadCastManager，所以必须通过调用其sendBroadcast方法来发送广播。否则上述的callback返回null  </span></span><br><span class="line">  LocalBroadcastManager.getInstance(TestActivity.<span class="keyword">this</span>).sendBroadcast(intent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="示例-静态广播"><a href="#示例-静态广播" class="headerlink" title="示例 - 静态广播"></a>示例 - 静态广播</h1><blockquote>
<p>背景<br>监听系统网络状态改变,从而做相应的处理。</p>
</blockquote>
<p>同上,注册的时候用registerReceiver、unregisterReceiver,用LocalBroadcastManager无效。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//定义Broadcast</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NetworkChangeReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义过滤系统action</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NETWORK_ACTION = ConnectivityManager.CONNECTIVITY_ACTION;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> NetworkChangeCallback callback;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NetworkChangeReceiver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NetworkChangeReceiver</span><span class="params">(NetworkChangeCallback callback)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.callback = callback;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (callback != <span class="keyword">null</span>) &#123;</span><br><span class="line">            callback.refresh();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 网络状态变化的回调接口</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">NetworkChangeCallback</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//activity的onCreate方法里注册Receiver</span></span><br><span class="line"></span><br><span class="line">receiver = <span class="keyword">new</span> NetworkChangeReceiver(<span class="keyword">this</span>);</span><br><span class="line">registerReceiver(receiver, <span class="keyword">new</span> IntentFilter(NetworkChangeReceiver.NETWORK_ACTION));</span><br><span class="line"></span><br><span class="line"><span class="comment">//反注册</span></span><br><span class="line"></span><br><span class="line">unregisterReceiver(receiver);</span><br></pre></td></tr></table></figure>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><blockquote>
<p>Fragment里注册广播<br>不能在OnCreateView里面注册,要在onCreate方法里面注册<br>记得在ondestory方法里注销广播</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android基础之BroadcastReceiver/">Android基础之BroadcastReceiver</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android-Activity" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/30/Android-Activity/" class="article-date">
      <time datetime="2015-10-30T07:42:08.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/Android-Activity/">Android基础之Activity</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Activity的理解"><a href="#Activity的理解" class="headerlink" title="Activity的理解"></a>Activity的理解</h1><blockquote>
<p>Activity是一种应用组件，用于创建与用户交互的界面。提供用户操作。</p>
</blockquote>
<h2 id="Activity的生命周期"><a href="#Activity的生命周期" class="headerlink" title="Activity的生命周期"></a>Activity的生命周期</h2><blockquote>
<p>当Activity被加载时，首先执行onCreate、onStart、onResume这三个方法。<br>当前界面被遮挡但还能看见的时候，则会执行onPause方法。<br>当界面被遮挡完全看不见的时候，则会执行onStop方法。<br>当界面又重新显示时，便会执行onResume方法。<br>最后Activity将会执行onDestory方法。</p>
</blockquote>
<p><img src="http://imglf.nosdn.127.net/img/ZFRpZXBrMUVQR0N4OTdhZ3JJNVpjUlFBTUhuTTY2K2J6OHB4WEo2ZCthRzFkcElsaUswdzBRPT0.png?imageView&amp;thumbnail=300x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h1 id="如何理解Task？"><a href="#如何理解Task？" class="headerlink" title="如何理解Task？"></a>如何理解Task？</h1><blockquote>
<p><font color="#1abc9c">Task类似一个任务栈,他是跨应用的,即Task可以存放不同程序的Activity。</font>例如我们的程序中Activity A有发送短信的功能,点击按钮后，便会启动发短信的程序里的Activity B。发完短信后，按返回键，便回到原来的Activity A中。从而确保了用户体验.</p>
</blockquote>
<h1 id="Activity启动模式"><a href="#Activity启动模式" class="headerlink" title="Activity启动模式"></a>Activity启动模式</h1><blockquote>
<p>理解<br>使用各种模式主要是为了判断是否需要创建Activity的实例。<br>不复用Activity实例时，跟普通跳转Activity无区别，都是创建新的Activity实例。所以需要讨论的何时复用Activity实例。<br>onNewIntent何时调用？有什么作用？<br>复用Activity实例的时候调用，接收跳转过来的Intent。</p>
</blockquote>
<table>
<thead>
<tr>
<th>启动模式</th>
<th>文档</th>
<th>理解</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>Standard</td>
<td>每次启动Activity都在栈中创建一个实例。默认</td>
<td>每次跳转页面都会创建Activity实例，需要一次次返回。</td>
<td>常用跳转页面</td>
</tr>
<tr>
<td>SingleTop</td>
<td>启动的Activity若位于栈顶，则直接复用该Activity，并且会调用onNewIntent方法,然后将Intent传到实例中。)，否则创建Activity实例。</td>
<td>当前Activity跳转到当前Activity不创建实例，其余情况都创建Activity实例。 <br> <font color="#1abc9c">只用于自己跳转自己的情况。</font></td>
<td>头条APP推送多个消息</td>
</tr>
<tr>
<td>SingleTask</td>
<td>判断是否存在与taskAffinity属性的相符合的Activity <br> &lt; <br> 存在 - 将该Activity的栈作为待跳转Activity的栈。判断是否存在实例？ <br> 『 <br> 存在 - 调用onNewIntent并处理传入的Intent <br> 不存在 - 创建新的Activity实例 <br> 』 <br> 不存在 - 启动新的Task栈，并启动该Activity <br> &gt; <br> <font color="#1abc9c"> taskAffinity默认为当前包名 ，不设置该属性将会在同一Task中启动 </font></td>
<td>当某个Activity设置launchMode为singleTask时，当Activity实例不存时，创建一个实例，其余情况都是复用该Activity的实例。 <br> <font color="#1abc9c"> 多次进入相同的界面，不想一次次返回的情况 </font></td>
<td>BNJ联系人详情 <br> 见下图</td>
</tr>
<tr>
<td>SingleInstance</td>
<td><font color="#1abc9c">跟SingleTask一样。只是每个Task有且仅有一个Activity</font></td>
<td>设置了SingleInstance的Activity在单独的栈中，从该Activity跳转的Activity也在单独的栈中 <br>  <font color="#1abc9c"> 被跳(B)和待跳转的Activity(C)都是在单独的栈中(A-&gt;B、B-&gt;C) </font></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Standard流程</p>
</blockquote>
<p><img src="http://imglf1.nosdn.127.net/img/ZFRpZXBrMUVQR0NlTUgxdVV6WC9wQ2JsRjkzb2lGeGdOeHRhQldWc3ZzUEU1a2FIUWVmdGtnPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<blockquote>
<p>SingleTask流程</p>
</blockquote>
<p><img src="http://imglf2.nosdn.127.net/img/ZFRpZXBrMUVQR0NlTUgxdVV6WC9wUGkvbHgvY3dwTmRURllYd1Fwd2pNM0dPUTVPbTVhNUlRPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><blockquote>
<p>操作流程<br>点击学生(查看学生详情)-&gt;发送消息-&gt;点击右上角图标(查看学生详情)-&gt;一层层返回</p>
</blockquote>
<h3 id="Standard模式-默认"><a href="#Standard模式-默认" class="headerlink" title="Standard模式(默认)"></a>Standard模式(默认)</h3><p><img src="http://imglf0.nosdn.127.net/img/ZFRpZXBrMUVQR0M5djVQL0crdzB6L3E5a0gyUmZ3WUo3SE1zNGdsb3dkZXErODltNlppUnNRPT0.gif" alt=""></p>
<h3 id="SingleTop模式"><a href="#SingleTop模式" class="headerlink" title="SingleTop模式"></a>SingleTop模式</h3><p>跟Standard模式一样，因为不是跳转当前Activity，所以会创建Activity实例。</p>
<h3 id="SingleTask模式"><a href="#SingleTask模式" class="headerlink" title="SingleTask模式"></a>SingleTask模式</h3><p><img src="http://imglf1.nosdn.127.net/img/ZFRpZXBrMUVQR0M5djVQL0crdzB6eE51ZXU3T0gzb1VZeEd3N0Iwb0JVN3JxU09DbWFMaC9nPT0.gif" alt=""></p>
<h3 id="SingleInstance模式"><a href="#SingleInstance模式" class="headerlink" title="SingleInstance模式"></a>SingleInstance模式</h3><blockquote>
<p>背景<br>BActivity设置了singleInstance<br>三个ActivityA、B、C。分别有一个按钮进行跳转，跳转顺序A-&gt;B-&gt;C。</p>
<p>不设置taskAffinity时，A跳B开启新的TASK，B跳C，回到原来的栈中，即AC同栈，B单独一个栈。<br>设置taskAffinity时，A跳B开启新的TASK，B跳C，开启新的TASK,三个Activity都在独立栈中。</p>
</blockquote>
<p>参考文献</p>
<blockquote>
<p><a href="http://www.cnblogs.com/meizixiong/archive/2013/07/03/3170591.html" target="_blank" rel="external">Activity四种启动模式</a></p>
<p><a href="http://blog.csdn.net/infsafe/article/details/5666964" target="_blank" rel="external">Android的Activity和Tasks详解</a></p>
<p><a href="http://www.runoob.com/w3cnote/android-tutorial-activity-intro.html" target="_blank" rel="external">菜鸟教程-Activity登堂入室</a></p>
<p><a href="http://blog.csdn.net/linmiansheng/article/details/24297375" target="_blank" rel="external">持剑博客</a></p>
</blockquote>
<h2 id="示例-实际开发"><a href="#示例-实际开发" class="headerlink" title="示例 - 实际开发"></a>示例 - 实际开发</h2><ul>
<li>SingleTask</li>
</ul>
<blockquote>
<p>背景：在BNJ项目1.0的时候，认证设置功能应该使用SingleTask模式。认证设置(A)-&gt;认证列表(B)-&gt;上传图片(C)-&gt;结果页面(D)-&gt;认证列表(B).<br>分析：这里的B应该设置成SingleTask模式。并且重写onNewIntent方法，从而获取设置后的值来更新页面。</p>
<p>SingleInstance</p>
<p>背景：当程序1要去另一个程序2获取数据时，其过程如下。程序1MainActivity-&gt;A-&gt;B-&gt;程序2中的C-&gt;返回数据给A<br>分析：A设置成SingleInstance模式。B跳C后finish。C跳A后Finish。</p>
</blockquote>
<h1 id="onSaveInstanceState的理解"><a href="#onSaveInstanceState的理解" class="headerlink" title="onSaveInstanceState的理解"></a>onSaveInstanceState的理解</h1><p><img src="http://imglf1.nosdn.127.net/img/ZFRpZXBrMUVQR0N4OTdhZ3JJNVpjUlpiVlA3bGJ2eTVYeE9NUk9GT0xHbHlveTVweVJ2blZnPT0.png?imageView&amp;thumbnail=300x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<blockquote>
<p>onSaveInstanceState在将要销毁Activity时，进行数据保存。<br>onRestoreInstanceState在确定Activity被销毁后，进行数据恢复。</p>
</blockquote>
<h2 id="onSaveInstanceState的作用"><a href="#onSaveInstanceState的作用" class="headerlink" title="onSaveInstanceState的作用"></a>onSaveInstanceState的作用</h2><blockquote>
<p>onSaveInstanceState作用是保存临时状态。(在onPause或onStop方法之前)<br>通常用putExtra方法来保存数据。<br>onRestoreInstanceState作用是恢复状态。<br>通常用getXXX方法来获取数据。</p>
</blockquote>
<h2 id="onSaveInstanceState何时调用"><a href="#onSaveInstanceState何时调用" class="headerlink" title="onSaveInstanceState何时调用"></a>onSaveInstanceState何时调用</h2><blockquote>
<p>当某个Activity将要被销毁时，便会执行onSaveInstanceState。<br>示例<br>用户长按HOME键，选择运行其他程序时。<br>用户按下HOME键时。<br>用户按下电源键时。<br>屏幕切换时。<br>改变语言后。</p>
</blockquote>
<hr>
<blockquote>
<p>当Activity确定被销毁的时候，onRestoreInstanceState方法肯定执行。</p>
</blockquote>
<h2 id="示例-测试两个方法的执行"><a href="#示例-测试两个方法的执行" class="headerlink" title="示例 - 测试两个方法的执行"></a>示例 - 测试两个方法的执行</h2><blockquote>
<p>操作 - 屏幕翻转<br>通过Edittext文本的值来判断方法的执行</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//必须要调用 onSaveInstanceState() 方法的父类实现，这样默认的父类实现才能保存视图状态的信息。</span></span><br><span class="line">		<span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">		<span class="comment">//Activity将要销毁时，保存Edittext的文本</span></span><br><span class="line">		outState.putString(<span class="string">"etText"</span>, etText.getText().toString());</span><br><span class="line">		LogTool.e(<span class="string">"save"</span>, <span class="string">"onSaveInstanceState"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//	//必须要调用 onRestoreInstanceState() 方法的父类实现，这样默认的父类实现才能保存视图状态的信息。</span></span><br><span class="line">		<span class="keyword">super</span>.onRestoreInstanceState(savedInstanceState);</span><br><span class="line">		<span class="keyword">if</span> (savedInstanceState != <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">//恢复数据时，Edittext添加new文本，表示执行了该方法。</span></span><br><span class="line">				String msg = savedInstanceState.getString(<span class="string">"etText"</span>);</span><br><span class="line">				etText.setText(msg + <span class="string">"new"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		LogTool.e(<span class="string">"save"</span>, <span class="string">"onRestoreInstanceState"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="默认状态"><a href="#默认状态" class="headerlink" title="默认状态"></a>默认状态</h2><p>调用父类的方法,默认保存一些UI状态,例如Edittext的值、CheckBox的勾选状态。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">super</span>.onSaveInstanceState(outState)</span><br></pre></td></tr></table></figure>
<h2 id="暂离状态保存数据的选择"><a href="#暂离状态保存数据的选择" class="headerlink" title="暂离状态保存数据的选择"></a>暂离状态保存数据的选择</h2><blockquote>
<p>onSaveInstanceState用于保存瞬态数据。<br>onPause用于保存持久化数据(保存在文件、数据库),但不能保存耗时数据。</p>
</blockquote>
<h1 id="横竖屏相关知识"><a href="#横竖屏相关知识" class="headerlink" title="横竖屏相关知识"></a>横竖屏相关知识</h1><h2 id="配置文件里配置"><a href="#配置文件里配置" class="headerlink" title="配置文件里配置"></a>配置文件里配置</h2><blockquote>
<p>AndroidMainfest文件里Activity的属性android:screenOrientation, 有下述可选值：</p>
<p>unspecified:默认值 由系统来判断显示方向.判定的策略是和设备相关的，所以不同的设备会有不同的显示方向。<br>landscape:横屏显示（宽比高要长）<br>portrait:竖屏显示(高比宽要长)<br>user:用户当前首选的方向<br>behind:和该Activity下面的那个Activity的方向一致(在Activity堆栈中的)<br>sensor:有物理的感应器来决定。如果用户旋转设备这屏幕会横竖屏切换。<br>nosensor:忽略物理感应器，这样就不会随着用户旋转设备而更改了（”unspecified”设置除外）。</p>
</blockquote>
<h4 id="横竖屏加载不同布局"><a href="#横竖屏加载不同布局" class="headerlink" title="横竖屏加载不同布局"></a>横竖屏加载不同布局</h4><blockquote>
<p>onCreate里调用下面代码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)&#123;  </span><br><span class="line">     setContentView(R.layout.横屏);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.getResources().getConfiguration().orientation ==Configuration.ORIENTATION_PORTRAIT) &#123;  </span><br><span class="line">    setContentView(R.layout.竖屏);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="设置全屏方法"><a href="#设置全屏方法" class="headerlink" title="设置全屏方法"></a>设置全屏方法</h3><blockquote>
<p>getActionBar().hide();<br>在super之前调用requestWindowFeature(Window.FEATURE_NO_TITLE);<br>设置theme = @android:style/Theme.NoTitleBar.FullScreen</p>
</blockquote>
<p><a href="http://blog.sina.com.cn/s/blog_618199e60101g1k5.html" target="_blank" rel="external">onSave、onRestore</a></p>
<p><a href="https://developer.android.com/guide/topics/resources/runtime-changes.html" target="_blank" rel="external">官方处理配置变更</a></p>
<p><a href="https://developer.android.com/guide/components/activities.html" target="_blank" rel="external">官方文档Activity</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android基础之Activity/">Android基础之Activity</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Volley" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/29/Volley/" class="article-date">
      <time datetime="2015-10-29T07:29:10.000Z" itemprop="datePublished">2015-10-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/29/Volley/">Volley跟Async-http的封装</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="Volley基础"><a href="#Volley基础" class="headerlink" title="Volley基础"></a>Volley基础</h1><blockquote>
<p>Gradle代码<br>compile ‘com.mcxiaoke.volley:library:1.0.19’</p>
<p>理解<br>1.Volley有get 、post等方式请求数据。<br>2.Volley可以建立、取消请求队列。<br>3.把请求加入请求队列即可完成请求。</p>
<p>作用<br>封装网络请求类，使请求代码量减少。<br>大大提高性能（反正很厉害就对了）。</p>
</blockquote>
<h2 id="示例-Volley使用"><a href="#示例-Volley使用" class="headerlink" title="示例 - Volley使用"></a>示例 - Volley使用</h2><blockquote>
<p>RequestQueue queue = Volley.newRequestQueue(context)//创建一个队列<br>StringRequest jr  = new StringRequest(请求方式get/post，请求url，成功监听器，失败监听器)//创建一种请求方式<br>queue.add(jr);//加入到队列</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Async-http/">Async-http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Volley/">Volley</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/10/29/Volley/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Notification" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/03/Notification/" class="article-date">
      <time datetime="2015-10-03T09:34:10.000Z" itemprop="datePublished">2015-10-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/03/Notification/">Notification笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="Notification基本知识"><a href="#Notification基本知识" class="headerlink" title="Notification基本知识"></a>Notification基本知识</h1><blockquote>
<p>Notification.Builder类 用于设置消息的标题、内容、图标等信息。<br>NotificationManager类 用于发送、取消通知。</p>
</blockquote>
<p><img src="http://imglf2.nosdn0.126.net/img/U05xRllGZk4zNVBGcXdIb1RYRVlPQ01QTklRWFVLbWNSR01HNW56ZFJIbmxSVExnZ3YySTV3PT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h1 id="示例-Notification基本使用"><a href="#示例-Notification基本使用" class="headerlink" title="示例 - Notification基本使用"></a>示例 - Notification基本使用</h1><blockquote>
<p>由于getNotificatoin()方法已经过时，因此要实现Notification就用Notification.Builder()的build方法。<br>示例代码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">Notification notification = <span class="keyword">new</span> Notification.Builder(SettingActivity.<span class="keyword">this</span>)</span><br><span class="line">       .setContentTitle(<span class="string">"版本更新"</span>)<span class="comment">//设置标题</span></span><br><span class="line">       .setSmallIcon(R.mipmap.ic_launcher)<span class="comment">//图标</span></span><br><span class="line">       .setContentInfo(<span class="string">"GDPC"</span>)<span class="comment">//设置右边的小提示</span></span><br><span class="line">       .setAutoCancel(<span class="keyword">false</span>) <span class="comment">// 设置点击取消（貌似无效）</span></span><br><span class="line">       .setTicker(<span class="string">"有新版本了"</span>) <span class="comment">//状态栏显示收到的消息</span></span><br><span class="line">       .setDefaults(Notification.DEFAULT_VIBRATE)<span class="comment">//设置震动</span></span><br><span class="line">       .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)) <span class="comment">//设置声音</span></span><br><span class="line">       .build();</span><br><span class="line">manager.notify(<span class="number">0</span>,notification); <span class="comment">// 发送通知</span></span><br></pre></td></tr></table></figure>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Notification笔记/">Notification笔记</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/10/03/Notification/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-VersionUpdate" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/02/VersionUpdate/" class="article-date">
      <time datetime="2015-10-02T07:41:04.000Z" itemprop="datePublished">2015-10-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/02/VersionUpdate/">版本更新</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="版本更新开发"><a href="#版本更新开发" class="headerlink" title="版本更新开发"></a>版本更新开发</h1><p><img src="http://imglf.nosdn.127.net/img/U05xRllGZk4zNU1sSE9BWW5zVm53V1dab0ZxVkNjb0xmYW0zNEgrdVEwanU1OVk4NVh1aXhnPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/版本更新/">版本更新</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2015/10/02/VersionUpdate/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  

 </div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 TanJunDang
            </div>
		<!--
      <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
      </div>
		-->

        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >访问人数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 5;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>



<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  </div>
</body>
</html>