<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>RxJava、RxAndroid的理解 | TanJunDang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="RxJava是什么
理解1.可以理解为RxJava是一个异步操作的库。2.RxJava使代码简洁、逻辑清晰。3.用于处理观察者模式(事件总线)的需求。4.可以取出集合元素逐个处理。">
<meta property="og:type" content="article">
<meta property="og:title" content="RxJava、RxAndroid的理解">
<meta property="og:url" content="TanJunDang.github.io/2016/06/13/RxAndroid/index.html">
<meta property="og:site_name" content="TanJunDang">
<meta property="og:description" content="RxJava是什么
理解1.可以理解为RxJava是一个异步操作的库。2.RxJava使代码简洁、逻辑清晰。3.用于处理观察者模式(事件总线)的需求。4.可以取出集合元素逐个处理。">
<meta property="og:updated_time" content="2017-01-19T10:37:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RxJava、RxAndroid的理解">
<meta name="twitter:description" content="RxJava是什么
理解1.可以理解为RxJava是一个异步操作的库。2.RxJava使代码简洁、逻辑清晰。3.用于处理观察者模式(事件总线)的需求。4.可以取出集合元素逐个处理。">
  
    <link rel="alternative" href="/atom.xml" title="TanJunDang" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: false,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','LFp3mbq3aoaxwzxP9eby','2.0.0');
</script>

        <a href="/" class="profilepic">
            
            <img src="/img/lrving.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">TanJunDang</a></h1>
        </hgroup>

        
        
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">HOME</a></li>
                        
                            <li><a href="/archives">ARCHIVES</a></li>
                        
                            <li><a href="/about">ABOUT</a></li>
                        
                            <li><a href="/tags">TAGs</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="mailto:TanJunDang324@gmail.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/TanJunDang" title="github">github</a>
                            
                                <a class="fl twitter" target="_blank" href="http: //twitter.com/TanJunDang" title="twitter">twitter</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://stormzhang.com/">stormzhang</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://kevinsu917.github.io/posts/">kevinsu917</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">TanJunDang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img src="/img/lrving.jpg" class="js-avatar" style="width: 100%; height: 100%; opacity: 1;">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">TanJunDang</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">HOME</a></li>
                
                    <li><a href="/archives">ARCHIVES</a></li>
                
                    <li><a href="/about">ABOUT</a></li>
                
                    <li><a href="/tags">TAGs</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="mailto:TanJunDang324@gmail.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/TanJunDang" title="github">github</a>
                    
                        <a class="twitter" target="_blank" href="http: //twitter.com/TanJunDang" title="twitter">twitter</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-RxAndroid" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/13/RxAndroid/" class="article-date">
      <time datetime="2016-06-13T00:52:28.000Z" itemprop="datePublished">2016-06-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      RxJava、RxAndroid的理解
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RxJava、RxAndroid的理解/">RxJava、RxAndroid的理解</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="RxJava是什么"><a href="#RxJava是什么" class="headerlink" title="RxJava是什么"></a>RxJava是什么</h1><blockquote>
<p>理解<br>1.可以理解为RxJava是一个异步操作的库。<br>2.RxJava使代码简洁、逻辑清晰。<br>3.用于处理观察者模式(事件总线)的需求。<br>4.可以取出集合元素逐个处理。</p>
</blockquote>
<a id="more"></a>
<h2 id="适用场合"><a href="#适用场合" class="headerlink" title="适用场合"></a>适用场合</h2><blockquote>
<p>事件A（观察者）对事件B（被观察者）的某种变化高度敏感，需要在B变化的一瞬间做出反应。（高敏感度监听）</p>
</blockquote>
<h2 id="常见术语"><a href="#常见术语" class="headerlink" title="常见术语"></a>常见术语</h2><p>Observable：发射源，被观察者。</p>
<p>Observer：接收源，观察者模式中的“观察者”，可接收Observable、Subject发射的数据；</p>
<p>Subscriber：接收源，观察者模式中的订阅者，那它跟Observer有什么区别呢？Subscriber实现了Observer接口，比Observer多了一个最重要的方法unsubscribe( )，用来取消订阅，当你不再想接收数据了，可以调用unsubscribe( )方法停止接收，Observer 在 subscribe() 过程中,最终也会被转换成 Subscriber 对象，一般情况下，建议使用Subscriber作为接收源；</p>
<p>Subscription ：Observable调用subscribe( )方法返回的对象，同样有unsubscribe( )方法，可以用来取消订阅事件；</p>
<p>Action0：RxJava中的一个接口，它只有一个无参call（）方法，且无返回值，同样还有Action1，Action2…Action9等，Action1封装了含有 1 个参的call（）方法，即call（T t），Action2封装了含有 2 个参数的call方法，即call（T1 t1，T2 t2），以此类推；</p>
<p>Func0：与Action0非常相似，也有call（）方法，但是它是有返回值的，同样也有Func0、Func1…Func9;</p>
<h1 id="RxJava实际使用"><a href="#RxJava实际使用" class="headerlink" title="RxJava实际使用"></a>RxJava实际使用</h1><h2 id="基础使用方法"><a href="#基础使用方法" class="headerlink" title="基础使用方法"></a>基础使用方法</h2><blockquote>
<p>发布者Observerable、订阅者Subscriber、订阅方法subscribe()<br>发布者调用create方法创建对象，订阅者创建对象通过onNext方法接收消息，发布者通过订阅方法绑定订阅者(即发布消息给订阅者)。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发布者,发布相关消息</span></span><br><span class="line">observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;TestEvent&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> TestEvent&gt; sub)</span> </span>&#123;</span><br><span class="line">        TestEvent testEvent = <span class="keyword">new</span> TestEvent();</span><br><span class="line">        testEvent.setMsg(<span class="string">"do something"</span>);</span><br><span class="line">        sub.onNext(testEvent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//订阅者，获取发布者的消息。</span></span><br><span class="line">subscriber = <span class="keyword">new</span> Subscriber&lt;TestEvent&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(TestEvent event)</span> </span>&#123;</span><br><span class="line">        Functions.toast(TestActivity.<span class="keyword">this</span>, event.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//发布者发布消息</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RxAndroid</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    observable.subscribe(subscriber);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Just处理集合和对象"><a href="#Just处理集合和对象" class="headerlink" title="Just处理集合和对象"></a>Just处理集合和对象</h2><blockquote>
<p>Just方法,直接传入相关的事件即可(默认会创建对象、调用onNext等方法)。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跟上述代码一样</span></span><br><span class="line"></span><br><span class="line">TestEvent testEvent = <span class="keyword">new</span> TestEvent();</span><br><span class="line">testEvent.setMsg(<span class="string">"read the fucking code"</span>);</span><br><span class="line">observable = Observable.just(testEvent);</span><br><span class="line"><span class="comment">//just可传入多个事件，依次调用onNext(testEvent)，onNext(finishEvent);；</span></span><br><span class="line"><span class="comment">//observable = Observable.just(testEvent，finishEvent);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Action1对象，处理接收到的信息。</span></span><br><span class="line">onNextAction = <span class="keyword">new</span> Action1&lt;TestEvent&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(TestEvent event)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//发布者发布消息</span></span><br><span class="line"><span class="comment">//@onNextAction 主要处理事件</span></span><br><span class="line"><span class="comment">//onErrorAction、onCompleteAction可以没有</span></span><br><span class="line"></span><br><span class="line">observable.subscribe(onNextAction);</span><br><span class="line"><span class="comment">//myObservable.subscribe(onNextAction, onErrorAction, onCompleteAction);</span></span><br></pre></td></tr></table></figure>
<h3 id="最后缩减代码优化"><a href="#最后缩减代码优化" class="headerlink" title="最后缩减代码优化"></a>最后缩减代码优化</h3><blockquote>
<p>不需要创建Observable引用,直接使用just操作符以及subscribe方法即可。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接传入事件,并且创建Action1对象即可。</span></span><br><span class="line"></span><br><span class="line">TestEvent testEvent = <span class="keyword">new</span> TestEvent();</span><br><span class="line">testEvent.setMsg(<span class="string">"read the fucking code"</span>);</span><br><span class="line">Observable.just(testEvent)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;TestEvent&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(TestEvent event)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//对接收到的event进行处理</span></span><br><span class="line">				Functions.toast(TestActivity.<span class="keyword">this</span>, event.getMsg());</span><br><span class="line">            &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="from处理集合元素"><a href="#from处理集合元素" class="headerlink" title="from处理集合元素"></a>from处理集合元素</h2><blockquote>
<p>from操作符作用相当于对集合的每个元素进行处理,即跟循环获取元素的功能。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通类型Object、List、Set</span></span><br><span class="line">String[] strs = <span class="keyword">new</span> String[]&#123;<span class="string">"TAN"</span>, <span class="string">"JUN"</span>, <span class="string">"DANG"</span>&#125;;</span><br><span class="line">Observable</span><br><span class="line">.from(strs)</span><br><span class="line">.subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String event)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//依次输出TAN,JUN,DANG</span></span><br><span class="line">        LogUtil.v(TAG, event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//集合类型HashMap</span></span><br><span class="line">HashMap&lt;Integer, String&gt; map = <span class="keyword">new</span> HashMap();</span><br><span class="line">map.put(<span class="number">1</span>, <span class="string">"TAN"</span>);</span><br><span class="line">map.put(<span class="number">2</span>, <span class="string">"JUN"</span>);</span><br><span class="line">map.put(<span class="number">3</span>, <span class="string">"DANG"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对HashMap的特殊处理,需要用到map的entrySet方法</span></span><br><span class="line"></span><br><span class="line">Observable</span><br><span class="line">.from(map.entrySet())</span><br><span class="line">.subscribe(<span class="keyword">new</span> Action1&lt;Map.Entry&lt;Integer, String&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Map.Entry&lt;Integer, String&gt; entry)</span> </span>&#123;</span><br><span class="line">        LogUtil.v(TAG, <span class="string">"key:"</span> + entry.getKey() + <span class="string">"\nvalue:"</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结：使用from操作符后不能再返回对象，否则会报转型错。</p>
</blockquote>
<h2 id="Map改变原返回对象类型"><a href="#Map改变原返回对象类型" class="headerlink" title="Map改变原返回对象类型"></a>Map改变原返回对象类型</h2><blockquote>
<p>理解<br>map操作符的作用是改变call方法的返回类型(一对一转换)，map(待转类型,目标类型)。<br>传入某个值，进行一系列的操作后，输出另一个值。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">TestEvent testEvent = <span class="keyword">new</span> TestEvent();</span><br><span class="line">testEvent.setMsg(<span class="string">"read the fucking code"</span>);</span><br><span class="line">Observable.just(testEvent)</span><br><span class="line"><span class="comment">//通过map方法，将TestEvent对象转换成String对象</span></span><br><span class="line">        .map(<span class="keyword">new</span> Func1&lt;TestEvent, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(TestEvent event)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//这里直接返回TestEvent的getMsg()信息</span></span><br><span class="line">                <span class="keyword">return</span> event.getMsg();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="comment">//此处Action要跟map返回的类型一致。</span></span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String event)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//对接收到的event进行处理</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="flatMap改变原返回对象类型"><a href="#flatMap改变原返回对象类型" class="headerlink" title="flatMap改变原返回对象类型"></a>flatMap改变原返回对象类型</h2><blockquote>
<p>flatMap操作符的作用是改变call方法的返回对象Obserable的类型(一对多转换)，flatMap(待转类型,目标类型)。</p>
</blockquote>
<h2 id="interval间隔发射序列"><a href="#interval间隔发射序列" class="headerlink" title="interval间隔发射序列"></a>interval间隔发射序列</h2><blockquote>
<p>interval指间隔发射序列。常跟take连用。<br>take指取序列中的第几个。</p>
</blockquote>
<h2 id="Scheduler切换线程"><a href="#Scheduler切换线程" class="headerlink" title="Scheduler切换线程"></a>Scheduler切换线程</h2><blockquote>
<p>引入背景<br>RxJava默认的操作时在主线程执行的，若在执行代码时中有耗时操作，则会导致线程阻塞。所以应该切换线程进行处理。<br>操作符<br>切换线程有两个操作符，subscribeOn、observeOn。</p>
</blockquote>
<h3 id="操作符类型"><a href="#操作符类型" class="headerlink" title="操作符类型"></a>操作符类型</h3><table>
<thead>
<tr>
<th>操作符类型</th>
<th>操作符</th>
</tr>
</thead>
<tbody>
<tr>
<td>产生操作符</td>
<td>create()、just()、from()、repeat()、interval()、range()、timer()、empty()、等</td>
</tr>
<tr>
<td>加工操作符</td>
<td>map()、flapMap()、scan()、filter()等</td>
</tr>
<tr>
<td>消费操作符</td>
<td>subscribe()</td>
</tr>
</tbody>
</table>
<blockquote>
<p>更多的操作符类型看文章结尾。</p>
</blockquote>
<h3 id="Scheduler分类"><a href="#Scheduler分类" class="headerlink" title="Scheduler分类"></a>Scheduler分类</h3><p>Schedulers.immediate()：直接在当前线程运行，相当于不指定线程。这是默认的 Scheduler。<br>Schedulers.newThread()：总是启用新线程，并在新线程执行操作。<br>Schedulers.io()： I/O 操作（读写文件、读写数据库、网络信息交互等）所使用的 Scheduler。行为模式和 newThread() 差不多，区别在于 io() 的内部实现是是用一个无数量上限的线程池，可以重用空闲的线程，因此多数情况下 io() 比 newThread() 更有效率。不要把计算工作放在 io() 中，可以避免创建不必要的线程。<br>Schedulers.computation()：计算所使用的 Scheduler。这个计算指的是 CPU 密集型计算，即不会被 I/O 等操作限制性能的操作，例如图形的计算。这个 Scheduler 使用的固定的线程池，大小为 CPU 核数。不要把 I/O 操作放在 computation() 中，否则 I/O 操作的等待时间会浪费 CPU。<br>AndroidSchedulers.mainThread()：它指定的操作将在 Android 主线程运行。</p>
<h3 id="subscribeOn、observeOn两者的区别"><a href="#subscribeOn、observeOn两者的区别" class="headerlink" title="subscribeOn、observeOn两者的区别"></a>subscribeOn、observeOn两者的区别</h3><blockquote>
<p>切换线程操作符受操作符类型影响</p>
</blockquote>
<h3 id="subscribeOn操作符"><a href="#subscribeOn操作符" class="headerlink" title="subscribeOn操作符"></a>subscribeOn操作符</h3><blockquote>
<p>作用域<br>1.作用于产生操作符.(见上表)。<br>2.若subscribeOn之前有observeOn操作符，则前面的加工操作符无效。<br>3.作用于之后的操作符。直到下一个observeOn操作符出现。</p>
</blockquote>
<h3 id="observeOn操作符"><a href="#observeOn操作符" class="headerlink" title="observeOn操作符"></a>observeOn操作符</h3><blockquote>
<p>作用域<br>作用于observeOn之后的操作符，直到下一个observeOn出现。</p>
</blockquote>
<h1 id="用RxJava封装成RxBus"><a href="#用RxJava封装成RxBus" class="headerlink" title="用RxJava封装成RxBus"></a>用RxJava封装成RxBus</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RxBus</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> RxBus defaultInstance;</span><br><span class="line">    <span class="comment">// 主题</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Subject bus;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// PublishSubject只会把在订阅发生的时间点之后来自原始Observable的数据发射给观察者</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RxBus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        bus = <span class="keyword">new</span> SerializedSubject&lt;&gt;(PublishSubject.create());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单例RxBus</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RxBus <span class="title">getDefault</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        RxBus rxBus = defaultInstance;</span><br><span class="line">        <span class="keyword">if</span> (defaultInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (RxBus.class) &#123;</span><br><span class="line">                rxBus = defaultInstance;</span><br><span class="line">                <span class="keyword">if</span> (defaultInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    rxBus = <span class="keyword">new</span> RxBus();</span><br><span class="line">                    defaultInstance = rxBus;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rxBus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供了一个新的事件</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">post</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        bus.onNext(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//</span></span><br><span class="line">   <span class="comment">// 根据传递的 eventType 类型返回特定类型(eventType)的 被观察者,在处理的时候的线程是主线程</span></span><br><span class="line">   <span class="comment">//  @param eventType</span></span><br><span class="line">   <span class="comment">// @param &lt;T&gt;</span></span><br><span class="line">   <span class="comment">// @return</span></span><br><span class="line">   <span class="comment">//</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">Observable&lt;T&gt; <span class="title">toObservable</span><span class="params">(Class&lt;T&gt; eventType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bus.observeOn(AndroidSchedulers.mainThread()).ofType(eventType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="示例-RxBUS的使用"><a href="#示例-RxBUS的使用" class="headerlink" title="示例 - RxBUS的使用"></a>示例 - RxBUS的使用</h2><blockquote>
<p>接收页面需要定义全局变量Subscription testScption,并且反注册.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送消息</span></span><br><span class="line">RxBus.getDefault().post(<span class="keyword">new</span> TestEvent());</span><br><span class="line"><span class="comment">//接收处理</span></span><br><span class="line">testScption = RxBus.getDefault().toObservable(TestEvent.class).subscribe(<span class="keyword">new</span> Action1&lt;TestEvent&gt;() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(TestEvent testEvent)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//收到消息后做相应的处理</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//反注册</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    <span class="keyword">if</span> (testScption != <span class="keyword">null</span> &amp;&amp; !testScption.isUnsubscribed()) &#123;</span><br><span class="line">        testScption.unsubscribe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="操作符大全"><a href="#操作符大全" class="headerlink" title="操作符大全"></a>操作符大全</h1><h2 id="创建操作符：负责创建Observable对象"><a href="#创建操作符：负责创建Observable对象" class="headerlink" title="创建操作符：负责创建Observable对象"></a>创建操作符：负责创建Observable对象</h2><p>just( ) — 将一个或多个对象转换成发射这个或这些对象的一个Observable<br>from( ) — 将一个Iterable, 一个Future, 或者一个数组转换成一个Observable<br>repeat( ) — 创建一个重复发射指定数据或数据序列的Observable<br>repeatWhen( ) — 创建一个重复发射指定数据或数据序列的Observable，它依赖于另一个Observable发射的数据<br>create( ) — 使用一个函数从头创建一个Observable<br>defer( ) — 只有当订阅者订阅才创建Observable；为每个订阅创建一个新的Observable<br>range( ) — 创建一个发射指定范围的整数序列的Observable<br>interval( ) — 创建一个按照给定的时间间隔发射整数序列的Observable<br>timer( ) — 创建一个在给定的延时之后发射单个数据的Observable<br>empty( ) — 创建一个什么都不做直接通知完成的Observable<br>error( ) — 创建一个什么都不做直接通知错误的Observable<br>never( ) — 创建一个不发射任何数据的Observable</p>
<h2 id="变换操作符：对Observable发射的数据执行变换操作的各种操作符"><a href="#变换操作符：对Observable发射的数据执行变换操作的各种操作符" class="headerlink" title="变换操作符：对Observable发射的数据执行变换操作的各种操作符"></a>变换操作符：对Observable发射的数据执行变换操作的各种操作符</h2><p>map( ) — 对序列的每一项都应用一个函数来变换Observable发射的数据序列<br>flatMap( ), concatMap( ), and flatMapIterable( ) — 将Observable发射的数据集合变换为Observables集合，然后将这些Observable发射的数据平坦化的放进一个单独的Observable<br>switchMap( ) — 将Observable发射的数据集合变换为Observables集合，然后只发射这些Observables最近发射的数据<br>scan( ) — 对Observable发射的每一项数据应用一个函数，然后按顺序依次发射每一个值<br>groupBy( ) — 将Observable分拆为Observable集合，将原始Observable发射的数据按Key分组，每一个Observable发射一组不同的数据<br>buffer( ) — 它定期从Observable收集数据到一个集合，然后把这些数据集合打包发射，而不是一次发射一个<br>window( ) — 定期将来自Observable的数据分拆成一些Observable窗口，然后发射这些窗口，而不是每次发射一项<br>cast( ) — 在发射之前强制将Observable发射的所有数据转换为指定类型</p>
<h2 id="过滤操作符：用于过滤和选择Observable发射的数据序列"><a href="#过滤操作符：用于过滤和选择Observable发射的数据序列" class="headerlink" title="过滤操作符：用于过滤和选择Observable发射的数据序列"></a>过滤操作符：用于过滤和选择Observable发射的数据序列</h2><p>filter( ) — 过滤数据<br>takeLast( ) — 只发射最后的N项数据<br>last( ) — 只发射最后的一项数据<br>lastOrDefault( ) — 只发射最后的一项数据，如果Observable为空就发射默认值<br>takeLastBuffer( ) — 将最后的N项数据当做单个数据发射<br>skip( ) — 跳过开始的N项数据<br>skipLast( ) — 跳过最后的N项数据<br>take( ) — 只发射开始的N项数据<br>first( ) and takeFirst( ) — 只发射第一项数据，或者满足某种条件的第一项数据<br>firstOrDefault( ) — 只发射第一项数据，如果Observable为空就发射默认值<br>elementAt( ) — 发射第N项数据<br>elementAtOrDefault( ) — 发射第N项数据，如果Observable数据少于N项就发射默认值<br>sample( ) or throttleLast( ) — 定期发射Observable最近的数据<br>throttleFirst( ) — 定期发射Observable发射的第一项数据<br>throttleWithTimeout( ) or debounce( ) — 只有当Observable在指定的时间后还没有发射数据时，才发射一个数据<br>timeout( ) — 如果在一个指定的时间段后还没发射数据，就发射一个异常<br>distinct( ) — 过滤掉重复数据<br>distinctUntilChanged( ) — 过滤掉连续重复的数据<br>ofType( ) — 只发射指定类型的数据<br>ignoreElements( ) — 丢弃所有的正常数据，只发射错误或完成通知</p>
<h2 id="结合操作符：用于组合多个Observables的组合使用"><a href="#结合操作符：用于组合多个Observables的组合使用" class="headerlink" title="结合操作符：用于组合多个Observables的组合使用"></a>结合操作符：用于组合多个Observables的组合使用</h2><p>startWith( ) — 在数据序列的开头增加一项数据<br>merge( ) — 将多个Observable合并为一个<br>mergeDelayError( ) — 合并多个Observables，让没有错误的Observable都完成后再发射错误通知<br>zip( ) — 使用一个函数组合多个Observable发射的数据集合，然后再发射这个结果<br>and( ), then( ), and when( ) — (rxjava-joins) 通过模式和计划组合多个Observables发射的数据集合<br>combineLatest( ) — 当两个Observables中的任何一个发射了一个数据时，通过一个指定的函数组合每个Observable发射的最新数据（一共两个数据），然后发射这个函数的结果<br>join( ) and groupJoin( ) — 无论何时，如果一个Observable发射了一个数据项，只要在另一个Observable发射的数据项定义的时间窗口内，就将两个Observable发射的数据合并发射<br>switchOnNext( ) — 将一个发射Observables的Observable转换成另一个Observable，后者发射这些Observables最近发射的数据</p>
<h2 id="辅助操作符：用于Observable的辅助操作符"><a href="#辅助操作符：用于Observable的辅助操作符" class="headerlink" title="辅助操作符：用于Observable的辅助操作符"></a>辅助操作符：用于Observable的辅助操作符</h2><p>materialize( ) — 将Observable转换成一个通知列表convert an Observable into a list of Notifications<br>dematerialize( ) — 将上面的结果逆转回一个Observable<br>timestamp( ) — 给Observable发射的每个数据项添加一个时间戳<br>serialize( ) — 强制Observable按次序发射数据并且要求功能是完好的<br>cache( ) — 记住Observable发射的数据序列并发射相同的数据序列给后续的订阅者<br>observeOn( ) — 指定观察者观察Observable的调度器<br>subscribeOn( ) — 指定Observable执行任务的调度器<br>doOnEach( ) — 注册一个动作，对Observable发射的每个数据项使用<br>doOnCompleted( ) — 注册一个动作，对正常完成的Observable使用<br>doOnError( ) — 注册一个动作，对发生错误的Observable使用<br>doOnTerminate( ) — 注册一个动作，对完成的Observable使用，无论是否发生错误<br>doOnSubscribe( ) — 注册一个动作，在观察者订阅时使用<br>doOnUnsubscribe( ) — 注册一个动作，在观察者取消订阅时使用<br>finallyDo( ) — 注册一个动作，在Observable完成时使用<br>delay( ) — 延时发射Observable的结果<br>delaySubscription( ) — 延时处理订阅请求<br>timeInterval( ) — 定期发射数据<br>using( ) — 创建一个只在Observable生命周期存在的资源<br>single( ) — 强制返回单个数据，否则抛出异常<br>singleOrDefault( ) — 如果Observable完成时返回了单个数据，就返回它，否则返回默认数据<br>toFuture( ), toIterable( ), toList( ) — 将Observable转换为其它对象或数据结构</p>
<h1 id="示例代码-线程切换"><a href="#示例代码-线程切换" class="headerlink" title="示例代码 - 线程切换"></a>示例代码 - 线程切换</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Observable</span><br><span class="line">            .create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</span><br><span class="line">                    Logger.v(<span class="string">"rx_call"</span>, Thread.currentThread().getName());</span><br><span class="line"></span><br><span class="line">                    subscriber.onNext(<span class="string">"dd"</span>);</span><br><span class="line">                    subscriber.onCompleted();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">            .observeOn(Schedulers.newThread())    <span class="comment">//新线程</span></span><br><span class="line">            .map(<span class="keyword">new</span> Func1&lt;String, String&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    Logger.v(<span class="string">"rx_map"</span>, Thread.currentThread().getName());</span><br><span class="line">                    <span class="keyword">return</span> s + <span class="string">"88"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .observeOn(Schedulers.io())      <span class="comment">//io线程</span></span><br><span class="line">            .filter(<span class="keyword">new</span> Func1&lt;String, Boolean&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    Logger.v(<span class="string">"rx_filter"</span>, Thread.currentThread().getName());</span><br><span class="line">                    <span class="keyword">return</span> s != <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .subscribeOn(Schedulers.io())     <span class="comment">//定义事件产生线程：io线程</span></span><br><span class="line">            .map(<span class="keyword">new</span> Func1&lt;String, String&gt;() &#123;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    Logger.v(<span class="string">"rx_map2"</span>, Thread.currentThread().getName());</span><br><span class="line">                    <span class="keyword">return</span> s + <span class="string">"rx_map2"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())     <span class="comment">//事件消费线程：主线程</span></span><br><span class="line">            .subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    Logger.v(<span class="string">"rx_subscribe"</span>, Thread.currentThread().getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br></pre></td></tr></table></figure>
<p><a href="http://blog.danlew.net/2014/09/15/grokking-rxjava-part-1/" target="_blank" rel="external">RxJava英文参考</a><br><a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="external">给Android开发者的RxJava</a><br><a href="http://www.jianshu.com/p/ca090f6e2fe2" target="_blank" rel="external">RxBus参考</a><br><a href="https://github.com/lzyzsd/Awesome-RxJava" target="_blank" rel="external">Rx大全</a><br><a href="http://www.jianshu.com/p/5e93c9101dc5" target="_blank" rel="external">Rx基础</a><br><a href="http://www.jianshu.com/p/ecfb9d68d2a2" target="_blank" rel="external">RxJava切换线程</a><br><a href="http://www.cnblogs.com/zhaoyanjun/p/5624395.html" target="_blank" rel="external">线程切换例子</a></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/06/13/RxAndroid/">RxJava、RxAndroid的理解</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 TanJunDang 的个人博客">TanJunDang</a></p>
        <p><span>发布时间:</span>2016年06月13日 - 08时52分</p>
        <p><span>最后更新:</span>2017年01月19日 - 18时37分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/06/13/RxAndroid/" title="RxJava、RxAndroid的理解">http://TanJunDang.github.io/2016/06/13/RxAndroid/</a>
            <span class="copy-path" data-clipboard-text="原文: http://TanJunDang.github.io/2016/06/13/RxAndroid/　　作者: TanJunDang" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2016/05/31/LogTool/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          工具类的编写 - Log的封装
        
      </div>
    </a>
  
  
    <a href="/2016/07/05/Share/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">常用开发工具、框架、网站</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#RxJava是什么"><span class="toc-number">1.</span> <span class="toc-text">RxJava是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#适用场合"><span class="toc-number">1.1.</span> <span class="toc-text">适用场合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见术语"><span class="toc-number">1.2.</span> <span class="toc-text">常见术语</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RxJava实际使用"><span class="toc-number">2.</span> <span class="toc-text">RxJava实际使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基础使用方法"><span class="toc-number">2.1.</span> <span class="toc-text">基础使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Just处理集合和对象"><span class="toc-number">2.2.</span> <span class="toc-text">Just处理集合和对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#最后缩减代码优化"><span class="toc-number">2.2.1.</span> <span class="toc-text">最后缩减代码优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#from处理集合元素"><span class="toc-number">2.3.</span> <span class="toc-text">from处理集合元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map改变原返回对象类型"><span class="toc-number">2.4.</span> <span class="toc-text">Map改变原返回对象类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flatMap改变原返回对象类型"><span class="toc-number">2.5.</span> <span class="toc-text">flatMap改变原返回对象类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#interval间隔发射序列"><span class="toc-number">2.6.</span> <span class="toc-text">interval间隔发射序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scheduler切换线程"><span class="toc-number">2.7.</span> <span class="toc-text">Scheduler切换线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#操作符类型"><span class="toc-number">2.7.1.</span> <span class="toc-text">操作符类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scheduler分类"><span class="toc-number">2.7.2.</span> <span class="toc-text">Scheduler分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subscribeOn、observeOn两者的区别"><span class="toc-number">2.7.3.</span> <span class="toc-text">subscribeOn、observeOn两者的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subscribeOn操作符"><span class="toc-number">2.7.4.</span> <span class="toc-text">subscribeOn操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#observeOn操作符"><span class="toc-number">2.7.5.</span> <span class="toc-text">observeOn操作符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#用RxJava封装成RxBus"><span class="toc-number">3.</span> <span class="toc-text">用RxJava封装成RxBus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#示例-RxBUS的使用"><span class="toc-number">3.1.</span> <span class="toc-text">示例 - RxBUS的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#操作符大全"><span class="toc-number">4.</span> <span class="toc-text">操作符大全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建操作符：负责创建Observable对象"><span class="toc-number">4.1.</span> <span class="toc-text">创建操作符：负责创建Observable对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变换操作符：对Observable发射的数据执行变换操作的各种操作符"><span class="toc-number">4.2.</span> <span class="toc-text">变换操作符：对Observable发射的数据执行变换操作的各种操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤操作符：用于过滤和选择Observable发射的数据序列"><span class="toc-number">4.3.</span> <span class="toc-text">过滤操作符：用于过滤和选择Observable发射的数据序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结合操作符：用于组合多个Observables的组合使用"><span class="toc-number">4.4.</span> <span class="toc-text">结合操作符：用于组合多个Observables的组合使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#辅助操作符：用于Observable的辅助操作符"><span class="toc-number">4.5.</span> <span class="toc-text">辅助操作符：用于Observable的辅助操作符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#示例代码-线程切换"><span class="toc-number">5.</span> <span class="toc-text">示例代码 - 线程切换</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>




<div class="share">
    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
    <a href="#" class="bds_copy" data-cmd="copy" title="复制网址"></a>
    <a href="#" class="bds_mail" data-cmd="mail" title="通过邮件分享"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
    </div>
    <script>
        window._bd_share_config={
            "common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>
</div>




    
      <div class="duoshuo" id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2016/06/13/RxAndroid/" data-title="RxJava、RxAndroid的理解" data-url="TanJunDang.github.io/2016/06/13/RxAndroid/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"TanJunDang"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
		ds.async = true;
        ds.src = '/js/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/05/31/LogTool/" title="上一篇: 工具类的编写 - Log的封装">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2016/07/05/Share/" title="下一篇: 常用开发工具、框架、网站">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/Project-BaseApplication/">Android架构 - BaseApplication笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/Project-Architecture/">Android项目架构模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/Project-Network/">Android框架设计 - 网络层</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/DataBinding/">DataBinding的学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/Project-HttpProtocol/">Http业务基类的编写</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/18/SQLite/">SQLite数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/13/LayoutInflater/">LayoutInflater的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/ApkTool/">反编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/13/EditText/">EditText笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/13/TextView/">TextView学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/SearchView/">SearchView的学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/07/Offset/">Offset偏移量的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/Camera/">Camera学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/24/Socket/">Socket学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/22/ScrollView/">ScrollView学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/WebView/">WebView学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/Android-Permission/">Android6.0权限</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/ViewPager/">ViewPager笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/14/ActionBar/">ActionBar笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/07/Preference/">Preference的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/01/DialogFragment/">DialogFragment笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/29/DemoOne/">项目源码分析(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/18/CustomView/">自定义View笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/17/RecyclerView/">RecyclerView的个人理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/16/ItemBean/">代码分析 - ItemBean</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/13/RegEx/">正则表达式的总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/08/Skills/">开发中常用的技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/08/Timestamp/">时间戳</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/05/Share/">常用开发工具、框架、网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/RxAndroid/">RxJava、RxAndroid的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/LogTool/">工具类的编写 - Log的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/GsonTool/">工具类的编写 - Gson的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/Project-CacheModel/">Android框架设计-APP缓存策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/25/CustomMenu/">自定义底部弹出菜单</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/05/Android-File/">Android - File文件操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/11/Handler/">Handler机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/06/CodeOptimize/">Android-代码优化技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/05/EventBus/">EventBus学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/04/ProGuard/">混淆</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/31/OnTouchEvent/">事件分发机制onTouchEvent笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/30/BNJSummarize/">BNJ项目学到的知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/02/Gradle/">Gradle打包基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/01/Widgets/">Android控件的学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/01/DatePicker/">DatePicker笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/29/ImageUpload/">图片增加、删除</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/01/Style/">Android - Theme(Style)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/01/Animation/">Android动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/18/JAVASE/">JAVASE基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/02/Project-Build/">Android项目架构</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/01/Android-ContentProvider/">Android基础之ContentProvider</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/01/Android-Service/">Android基础之Service</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/31/Android-Broadcast/">Android基础之Broadcast</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/30/Android-Activity/">Android基础之Activity</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/29/Volley/">Volley跟Async-http的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/03/Notification/">Notification笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/02/VersionUpdate/">版本更新</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/01/Fragment/">Android-Fragment笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/30/Shape/">Shape、Selector、Inset</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/22/PopupWindow/">PopupWindow笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/20/Intent/">Android基础之Intent</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/17/Error-Bug/">开发中常见的Error、Bug</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/17/ImageLoaderTool/">ImageLoader的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/11/DrawerLayout/">DrawerLayout的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/08/Git/">Git的学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/01/ListView/">ListView的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/01/Canvas/">Canvas笔记</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 TanJunDang
            </div>
		<!--
      <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
      </div>
		-->

        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >访问人数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 5;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>



<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  </div>
</body>
</html>