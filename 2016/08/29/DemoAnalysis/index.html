<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

    <!--Description-->
    
        <meta name="description" content="Build a better app.">
    

    <!--Author-->
    
        <meta name="author" content="TanJunDang">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="项目源码分析"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="TanJunDang"/>

    <!--Page Cover-->
    
        <meta property="og:image" content="undefined"/>
    

    <!-- Title -->
    
    <title>项目源码分析 - TanJunDang</title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/main.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!--Favicon-->
    

</head>

<body>

<!-- Menu -->
<!-- Navigation -->
<header>
    <div class="logo">
        <a href="/">TanJunDang</a>
    </div><!-- end logo -->

    <div id="menu_icon"></div>
    <nav>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives">Archives</a>
            </li>
            
        </ul>
    </nav><!-- end navigation menu -->

    <div class="footer clearfix">
        <ul class="social clearfix">
            
            
                <li><a href="https://www.facebook.com/" class="fb" target="_blank" data-title="Facebook"></a></li>
            
            
                <li><a href="https://www.behance.net/" class="behance" target="_blank" data-title="Behance"></a></li>
            
            
                <li><a href="https://plus.google.com/+Pixelhint/posts" class="google" target="_blank" data-title="Google+"></a></li>
            
            
                <li><a href="https://dribbble.com/pixelhint" class="dribble" target="_blank" data-title="Dribble"></a></li>
            
            
            
            
        </ul><!-- end social -->

        <div class="rights">
            <p>Copyright © 2014 magnetic.</p>
            <p>Template by <a href="http://pixelhint.com/magnetic-free-html5-responsive-photography-website-template/">Pixelhint.com</a></p>
            <p>Hexo Theme by <a href="http://www.codeblocq.com/">Jonathan K.</a></p>
        </div><!-- end rights -->
    </div ><!-- end footer -->
</header><!-- end header -->


<!-- Main Content -->
<section class="main clearfix">

    <section class="top" style="background: url('http://placehold.it/1300x500');">
        <div class="wrapper content_header clearfix">
            

<div class="work_nav">

    <ul class="btn clearfix">
        
        <li><a href="/2016/09/01/DialogFragment/" class="previous" data-title="DialogFragment笔记"></a></li>
        
        <li><a href="/" class="grid" data-title="Portfolio"></a></li>
        
        <li><a href="/2016/08/18/CustomView/" class="next" data-title="自定义View笔记"></a></li>
        
    </ul>

</div><!-- end work_nav -->
            <h1 class="title">项目源码分析</h1>
        </div>
    </section><!-- end top -->

    <section class="wrapper">
        <div class="content">

            <!-- Gallery -->
            

            <!-- Content -->
            <blockquote>
<p>1.分析学习优秀项目中的一些比较基础和开发中常见的技术<br>2.参考学习别人代码</p>
</blockquote>
<a id="more"></a>
<h1 id="项目分析"><a href="#项目分析" class="headerlink" title="项目分析"></a>项目分析</h1><blockquote>
<p>该项目的原作者是zhaokaiqiang 项目下载地址 <a href="http://pan.baidu.com/s/1nvIYcOT" target="_blank" rel="external">http://pan.baidu.com/s/1nvIYcOT</a></p>
</blockquote>
<p><img src="http://imglf0.nosdn.127.net/img/ZFRpZXBrMUVQR0NDdzZxcnIrWlhFQWhZdHplbEpvZFVlQUNCWCtITENtczFrV1BwMmk2L2V3PT0.png?imageView&amp;thumbnail=250x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg%7Cwatermark&amp;type=2&amp;text=wqkgVGFuSnVuRGFuZyAvIHRhbmp1bmRhbmcubG9mdGVyLmNvbQ==&amp;font=bXN5aA==&amp;gravity=southwest&amp;dissolve=30&amp;fontsize=240&amp;dx=8&amp;dy=10&amp;stripmeta=0" alt=""><img src="http://imglf1.nosdn.127.net/img/ZFRpZXBrMUVQR0NDdzZxcnIrWlhFRWd5VEVMczhyVWVnQ0RRV3NkekZDUjRmNlBlQ2hJU0VBPT0.png?imageView&amp;thumbnail=250x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg%7Cwatermark&amp;type=2&amp;text=wqkgVGFuSnVuRGFuZyAvIHRhbmp1bmRhbmcubG9mdGVyLmNvbQ==&amp;font=bXN5aA==&amp;gravity=southwest&amp;dissolve=30&amp;fontsize=240&amp;dx=8&amp;dy=10&amp;stripmeta=0" alt=""></p>
<h2 id="MainActivity分析"><a href="#MainActivity分析" class="headerlink" title="MainActivity分析"></a>MainActivity分析</h2><h3 id="知识点-DrawerLayout的使用"><a href="#知识点-DrawerLayout的使用" class="headerlink" title="知识点 - DrawerLayout的使用"></a>知识点 - DrawerLayout的使用</h3><blockquote>
<p><a href="/2015/09/11/DrawerLayout/">DrawerLayout的基本使用</a></p>
<p>分析 1.项目是由DrawerLayout搭建起来的。 2.左抽屉跟主界面都是通过加载Fragment来实现。</p>
<p>总结 学习DrawerLayout跟ActionBarDrawerToggle的结合使用。 将开关DrawerLayout封装在一个方法内，供Fragment调用。</p>
<p><a href="http://blog.csdn.net/jjwwmlp456/article/details/41206513" target="_blank" rel="external">DrawerLayout跟ActionBarDrawerToggle结合使用</a></p>
</blockquote>
<h3 id="知识点-获取屏幕宽高的方式"><a href="#知识点-获取屏幕宽高的方式" class="headerlink" title="知识点 - 获取屏幕宽高的方式"></a>知识点 - 获取屏幕宽高的方式</h3><blockquote>
<p>第一种写法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">getScreenWidth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    WindowManager manager = (WindowManager) appContext.getSystemService(Context.WINDOW_SERVICE);</span><br><span class="line">    DisplayMetrics metrics = <span class="keyword">new</span> DisplayMetrics();</span><br><span class="line">    manager.getDefaultDisplay().getMetrics(metrics);</span><br><span class="line">    <span class="keyword">return</span> metrics.widthPixels;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>第二种写法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getScreenWidth</span><span class="params">(Activity activity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> activity.getWindowManager().getDefaultDisplay().getWidth();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="知识点-自定义数据源Menu列表"><a href="#知识点-自定义数据源Menu列表" class="headerlink" title="知识点 - 自定义数据源Menu列表"></a>知识点 - 自定义数据源Menu列表</h3><blockquote>
<p>分析 DrawerLayout的左边是一个RecyclerView和一个包含设置按钮RelativeLayout。 RecyclerView的数据源包括新鲜事、无聊图、段子、小电影。 自定义数据源的结构MenuItem<a href="/2016/08/16/ItemBean/">ItemBean</a> 点击Item切换Fragment，调用MainActivity的方法关闭DrawerLayout</p>
</blockquote>
<h4 id="MenuItem的代码"><a href="#MenuItem的代码" class="headerlink" title="MenuItem的代码"></a>MenuItem的代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuItem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过枚举来创建类型，而不是通常自定义一些静态常量通过类来调用。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> FragmentType &#123;</span><br><span class="line">        XINXIANSHI, WULIAOTU, MEIZITU, DUANZI, XIAODIANYING</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> resourceId;</span><br><span class="line">    <span class="keyword">private</span> FragmentType type;</span><br><span class="line">    <span class="keyword">private</span> Class&lt;? extends Fragment&gt; fragment;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getResourceId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> resourceId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setResourceId</span><span class="params">(<span class="keyword">int</span> resourceId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.resourceId = resourceId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;? extends Fragment&gt; getFragment() &#123;</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFragment</span><span class="params">(Class&lt;? extends Fragment&gt; fragment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fragment = fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FragmentType <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(FragmentType type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String title, <span class="keyword">int</span> resourceId, Class&lt;? extends Fragment&gt; fragment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.resourceId = resourceId;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">        <span class="keyword">this</span>.fragment = fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Item标题，图标，类型，对应Fragment</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String title, <span class="keyword">int</span> resourceId, FragmentType type, Class&lt;? extends Fragment&gt; fragment)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">        <span class="keyword">this</span>.resourceId = resourceId;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.fragment = fragment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Fragment的onAttatch的重写"><a href="#Fragment的onAttatch的重写" class="headerlink" title="Fragment的onAttatch的重写"></a>Fragment的onAttatch的重写</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttach</span><span class="params">(Activity activity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(activity);</span><br><span class="line">    <span class="keyword">if</span> (activity <span class="keyword">instanceof</span> MainActivity) &#123;</span><br><span class="line">        <span class="comment">//赋值全局对象</span></span><br><span class="line">        mainActivity = (MainActivity) activity;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"The activity must be a MainActivity !"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MenuItem点击的代码"><a href="#MenuItem点击的代码" class="headerlink" title="MenuItem点击的代码"></a>MenuItem点击的代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">holder.rl_container.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (currentFragment != menuItem.getType()) &#123;</span><br><span class="line">                Fragment fragment = (Fragment) Class.forName(menuItem.getFragment().getName()).newInstance();</span><br><span class="line">                mainActivity.replaceFragment(R.id.main_container, fragment);</span><br><span class="line">                currentFragment = menuItem.getType();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//点击后关闭DrawerLayout</span></span><br><span class="line">        mainActivity.closeDrawer();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote>
<p>1.利用枚举来定义类型</p>
<p>2.泛型类的定义 Class&lt;? extends Fragment&gt; fragment</p>
<p>3.onAttach中赋值获取Activity对象</p>
<p>4.Class.forName方法的使用 应用场景：根据字符串创建一个类</p>
</blockquote>
<h2 id="FreshNewsFragment分析"><a href="#FreshNewsFragment分析" class="headerlink" title="FreshNewsFragment分析"></a>FreshNewsFragment分析</h2><h3 id="知识点-在Fragment中获取Activity对象"><a href="#知识点-在Fragment中获取Activity对象" class="headerlink" title="知识点 - 在Fragment中获取Activity对象"></a>知识点 - 在Fragment中获取Activity对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> ActionBar mActionBar;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttach</span><span class="params">(Activity activity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onAttach(activity);</span><br><span class="line">                <span class="comment">//获取Activity中的actionbar，使子类Fragment可自定义标题</span></span><br><span class="line">        mActionBar = ((AppCompatActivity) activity).getSupportActionBar();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (activity <span class="keyword">instanceof</span> MainActivity) &#123;</span><br><span class="line">            mActionBar.getCustomView().setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                    onActionBarClick();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结 利用Fragment中onAttach方法接收Activity的对象</p>
</blockquote>
<h3 id="知识点-Fragment中使用Menu"><a href="#知识点-Fragment中使用Menu" class="headerlink" title="知识点 - Fragment中使用Menu"></a>知识点 - Fragment中使用Menu</h3><blockquote>
<p>1.在Fragment中重写onCreateOptionsMenu方法 2.在onCreate中调用 setHasOptionsMenu(true)方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Fragment中的方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setHasOptionsMenu(<span class="keyword">true</span>);</span><br><span class="line">        mActionBar.setTitle(<span class="string">"新鲜事"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu, MenuInflater inflater)</span> </span>&#123;</span><br><span class="line">        inflater.inflate(R.menu.menu_refresh, menu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.cnblogs.com/wolf-bing/p/3153836.html" target="_blank" rel="external">Fragment中的菜单</a></p>
<h3 id="知识点-ListView中Item加载动画"><a href="#知识点-ListView中Item加载动画" class="headerlink" title="知识点 - ListView中Item加载动画"></a>知识点 - ListView中Item加载动画</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Adapter中定义下列方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> lastPosition = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setAnimation</span><span class="params">(View viewToAnimate, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (position &gt; lastPosition) &#123;</span><br><span class="line">        Animation animation = AnimationUtils.loadAnimation(viewToAnimate.getContext(), R.anim.item_bottom_in);</span><br><span class="line">        viewToAnimate.startAnimation(animation);</span><br><span class="line">        lastPosition = position;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>xml定义如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span><br><span class="line">        <span class="attr">android:duration</span>=<span class="string">"600"</span></span><br><span class="line">        <span class="attr">android:fillAfter</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"100.0%"</span></span><br><span class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alpha</span></span><br><span class="line">        <span class="attr">android:duration</span>=<span class="string">"600"</span></span><br><span class="line">        <span class="attr">android:fillAfter</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></span><br><span class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结 fillAfter是指动画结束是画面停留在最后一帧 <a href="/2016/01/01/Animation/">Animation</a></p>
</blockquote>
<h3 id="知识点-Comparable排序"><a href="#知识点-Comparable排序" class="headerlink" title="知识点 - Comparable排序"></a>知识点 - Comparable排序</h3><h4 id="Comparable用于自定义排序规则"><a href="#Comparable用于自定义排序规则" class="headerlink" title="Comparable用于自定义排序规则"></a>Comparable用于自定义排序规则</h4><blockquote>
<p>作用 实现该接口的对象可以通过Arrays.sort() 或 Collections.sort()进行排序.</p>
</blockquote>
<table>
<thead>
<tr>
<th>表达式</th>
<th>返回值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>-1</td>
<td>x小于y</td>
</tr>
<tr>
<td>x.compareTo(y)</td>
<td>0</td>
<td>x等于y</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>x大于y</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContactObject</span> <span class="keyword">implements</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//返回值 有-1、0、1三种</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="示例-消息界面显示最新的消息"><a href="#示例-消息界面显示最新的消息" class="headerlink" title="示例 - 消息界面显示最新的消息"></a>示例 - 消息界面显示最新的消息</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ContactsTableObject</span> <span class="keyword">implements</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> lastContentTime;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getLastContentTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lastContentTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastContentTime</span><span class="params">(<span class="keyword">long</span> lastContentTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lastContentTime = lastContentTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过判断Date来决定输出顺序</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (another <span class="keyword">instanceof</span> ContactsTableObject) &#123;</span><br><span class="line">            <span class="keyword">return</span> ((Long) ((ContactsTableObject) another).getLastContentTime()).compareTo((Long) getLastContentTime());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结<br>重写Comparable的CompareTo方法，根据某个属性进行排序。</p>
</blockquote>


            <!-- Tags -->
            


<div class="tags">
    <a href="/tags/项目源码分析/">项目源码分析</a>
</div>



            <!-- Comments -->
            <div>
                




            </div>
        </div><!-- end content -->
    </section>
</section><!-- end main -->

<!-- After footer scripts -->

<!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Custom Code -->
<script src="/js/main.js"></script>

<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->


</body>

</html>