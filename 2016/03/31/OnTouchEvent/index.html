<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />

    <!--Description-->
    
        <meta name="description" content="Build a better app.">
    

    <!--Author-->
    
        <meta name="author" content="TanJunDang">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="事件分发机制onTouchEvent笔记"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="TanJunDang"/>

    <!--Page Cover-->
    
        <meta property="og:image" content="undefined"/>
    

    <!-- Title -->
    
    <title>事件分发机制onTouchEvent笔记 - TanJunDang</title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/main.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!--Favicon-->
    

</head>

<body>

<!-- Menu -->
<!-- Navigation -->
<header>
    <div class="logo">
        <a href="/">TanJunDang</a>
    </div><!-- end logo -->

    <div id="menu_icon"></div>
    <nav>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives">Archives</a>
            </li>
            
        </ul>
    </nav><!-- end navigation menu -->

    <div class="footer clearfix">
        <ul class="social clearfix">
            
            
                <li><a href="https://www.facebook.com/" class="fb" target="_blank" data-title="Facebook"></a></li>
            
            
                <li><a href="https://www.behance.net/" class="behance" target="_blank" data-title="Behance"></a></li>
            
            
                <li><a href="https://plus.google.com/+Pixelhint/posts" class="google" target="_blank" data-title="Google+"></a></li>
            
            
                <li><a href="https://dribbble.com/pixelhint" class="dribble" target="_blank" data-title="Dribble"></a></li>
            
            
            
            
        </ul><!-- end social -->

        <div class="rights">
            <p>Copyright © 2014 magnetic.</p>
            <p>Template by <a href="http://pixelhint.com/magnetic-free-html5-responsive-photography-website-template/">Pixelhint.com</a></p>
            <p>Hexo Theme by <a href="http://www.codeblocq.com/">Jonathan K.</a></p>
        </div><!-- end rights -->
    </div ><!-- end footer -->
</header><!-- end header -->


<!-- Main Content -->
<section class="main clearfix">

    <section class="top" style="background: url('http://placehold.it/1300x500');">
        <div class="wrapper content_header clearfix">
            

<div class="work_nav">

    <ul class="btn clearfix">
        
        <li><a href="/2016/04/04/ProGuard/" class="previous" data-title="混淆"></a></li>
        
        <li><a href="/" class="grid" data-title="Portfolio"></a></li>
        
        <li><a href="/2016/03/30/BNJSummarize/" class="next" data-title="BNJ项目学到的知识点"></a></li>
        
    </ul>

</div><!-- end work_nav -->
            <h1 class="title">事件分发机制onTouchEvent笔记</h1>
        </div>
    </section><!-- end top -->

    <section class="wrapper">
        <div class="content">

            <!-- Gallery -->
            

            <!-- Content -->
            <h1 id="分发事件基础知识"><a href="#分发事件基础知识" class="headerlink" title="分发事件基础知识"></a>分发事件基础知识</h1><blockquote>
<p>跟Touch相关的三个方法</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>dispatchTouchEvent</td>
<td>用来传递触摸event，一般不重写。表示是否消费该事件，其返回值由onInterceptTouchEvent、onTouchEvent决定</td>
</tr>
<tr>
<td>onInterceptTouchEvent</td>
<td>用来拦截触摸event，只有ViewGroup才有。默认返回false</td>
</tr>
<tr>
<td>onTouchEvent</td>
<td>用来处理触摸event。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>onInterceptTouchEvent跟onTouchEvent都在dispatchTouchEvent的内部。</p>
</blockquote>
<a id="more"></a>
<blockquote>
<p>理解<br>1.事件传递的过程：一层层判断是否拦截Event，直到被拦截或者到底层View时，再判断能否处理Event。<br>2.View没有onInterceptTouchEvent，View收到事件只能通过onTouchEvent方法处理。<br>3.View没有处理成功一个Event（onTouchEvent返回false），则同一事件序列（Action_Down、Action_Up）的Event不会再交给该View处理。<br>即View没处理成功DOWN事件，则Move、Up事件不会再给该View处理。<br>4.clickable影响onTouchEvent方法。<br>5.requestDisallowInterceptTouchEvent(boolean disallowIntercept)该方法决定是否允许拦截TouchEvent。如果为true，则View不允许父View拦截Event，则父View一直向下传递Event.即该View自己处理这个事件。</p>
</blockquote>
<h2 id="dispatchTouchEvent"><a href="#dispatchTouchEvent" class="headerlink" title="dispatchTouchEvent"></a>dispatchTouchEvent</h2><blockquote>
<p>dispatchTouchEvent用于传递触摸事件。<br>返回true表示向子视图(View、ViewGroup)传递触摸事件。<br>返回false表示不向下传递触摸事件，并且调用自身的onTouchEvent方法进行处理。</p>
</blockquote>
<h2 id="onInterceptTouchEvent"><a href="#onInterceptTouchEvent" class="headerlink" title="onInterceptTouchEvent"></a>onInterceptTouchEvent</h2><blockquote>
<p>onInterceptTouchEvent用于拦截触摸事件。<br>返回false表示不拦截该事件，事件将向下传递（传递给其子View）。<br>返回true则表示拦截该事件，事件将终止向下传递。事件由当前ViewGroup类来处理，就是调用该类的onTouchEvent方法。<br>ViewGroup特有方法，View没有该方法。</p>
</blockquote>
<h2 id="onTouchEvent"><a href="#onTouchEvent" class="headerlink" title="onTouchEvent"></a>onTouchEvent</h2><blockquote>
<p>onTouchEvent用于消费触摸事件。<br>返回true表示该View能处理该事件，事件将终止向上传递（传递给其父View）。<br>返回false表示不能处理，则把事件传递给其父View的onTouchEvent方法来处理。</p>
</blockquote>
<h1 id="事件分发过程"><a href="#事件分发过程" class="headerlink" title="事件分发过程"></a>事件分发过程</h1><p><img src="http://imglf0.nosdn.127.net/img/ZFRpZXBrMUVQR0NzSFVDT2k5ZVV2bnh3RXBZaDVPUTJ4WnhXT0FlN0RzclFsSXVjWE9iZ0ZnPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg" alt=""></p>
<h1 id="示例-滑动冲突"><a href="#示例-滑动冲突" class="headerlink" title="示例 - 滑动冲突"></a>示例 - 滑动冲突</h1><blockquote>
<p>在BNJ项目中遇到的是ScrollView里面嵌套GridView，因此两者是有滑动冲突的。</p>
<p>项目要求：保留两者的滑动效果</p>
<p>思路<br>1.自定义ScrollView，使其可以重写onInterceptTouchEvent方法。<br>2.在onInterceptTouchEvent方法中返回false即可。<br>3.提供修改onInterceptTouchEvent返回值的方法。</p>
</blockquote>
<hr>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote>
<p>1.优先级 onTouchListener &gt; onTouchEvent &gt; onClick<br>2.三个方法中super表示继续走流程，默认返回false。<br>3.disptach返回false，执行上级的onTouchEvent。返回true，消费事件。返回super，往下传递。</p>
</blockquote>
<p><a href="http://www.jianshu.com/p/e99b5e8bd67b" target="_blank" rel="external">事件分发</a></p>
<p><a href="http://blog.csdn.net/morgan_xww/article/details/9372285" target="_blank" rel="external">Android TouchEvent事件传递机制</a></p>
<p><a href="http://blog.csdn.net/guolin_blog/article/details/9153747" target="_blank" rel="external">OnTouch参考二</a></p>


            <!-- Tags -->
            


<div class="tags">
    <a href="/tags/事件分发机制onTouchEvent笔记/">事件分发机制onTouchEvent笔记</a>
</div>



            <!-- Comments -->
            <div>
                




            </div>
        </div><!-- end content -->
    </section>
</section><!-- end main -->

<!-- After footer scripts -->

<!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Custom Code -->
<script src="/js/main.js"></script>

<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->


</body>

</html>